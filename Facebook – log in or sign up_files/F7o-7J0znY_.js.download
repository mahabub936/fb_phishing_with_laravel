;/*FB_PKG_DELIM*/

__d("ForgetPasswordAutoSearch",["MEvent","findTag"],(function(a,b,c,d,e,f,g){function a(a,b,d){var e="";a=c("findTag")(a);var f=c("findTag")(b);b=c("findTag")(d);function g(){e=this.value}function h(){f.setAttribute("value",e)}c("MEvent").listen(a,"input",g);c("MEvent").listen(b,"click",h)}g.addListenerForgetPasswordAutoSearch=a}),98);
__d("LoginNativeButton",["BanzaiLogger","MDOM"],(function(a,b,c,d,e,f){"use strict";var g="native_login_button_click_client";e.exports={init:function(a,c){var d=this;b("MDOM").listen(a,"click",null,function(a){d._logClick(c)})},_logClick:function(a){var c=b("BanzaiLogger").create({retry:!0,delay:0});c.log("PlatformLoggedOutEventsLoggerConfig",{event:g,logger_id:a})}}}),null);
__d("MLoggedOutBannerGooglePlayRedirectWithFallback",["BanzaiLogger","DirectDownloadEvents","MDOM","UserAgent","clearInterval","clearTimeout","goURI","setInterval","setTimeout"],(function(a,b,c,d,e,f,g){var h=200,i=300,j=350,k=1500,l=2500;a=function(){function a(a){this.$1=a.button,this.$2=a.native_app_url,this.$3=a.fallback_url,this.$4=a.logging_data,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=0,this.$10=!0,this.$11=d("MDOM").create("iframe",{style:{display:"none"}}),d("MDOM").insertAfter(this.$1,this.$11),c("BanzaiLogger").create({signal:!0,delay:1e3}).log("DirectDownloadLoggerConfig",{event:c("DirectDownloadEvents").logged_out_banner_impression_client,app_referrer:this.$4.app_referrer,app:this.$4.app,country:this.$4.country}),this.$12()}var b=a.prototype;b.$12=function(){var a=this;this.$1.addEventListener("click",function(){a.$13()});this.$10=!0};b.$13=function(){this.$10&&(this.$10=!1,this.$14(),this.$15())};b.$15=function(){var a=this;a.$9=Date.now();var b=function(){a.$16(a.$3)},d=function(){a.$17(a.$2,b)},e=function(){a.$6=c("setTimeout")(d,k),a.$18(a.$2,b)};a.$5=c("setInterval")(function(){a.$19()?a.$20():a.$9=Date.now()},h);c("UserAgent").isBrowser("Firefox")?e():d()};b.$17=function(a,b){var d=this;if(d.$19())return;c("clearTimeout")(d.$8);var e=!1;d.$11.src="";d.$11.onload=function(){e=!0,c("BanzaiLogger").create({signal:!0,delay:1e3}).log("DirectDownloadLoggerConfig",{event:c("DirectDownloadEvents").logged_out_banner_google_play_redirect_failed,app_referrer:d.$4.app_referrer,app:d.$4.app,country:d.$4.country}),b()};d.$11.src=a;d.$8=c("setTimeout")(function(){var c=d.$11.contentDocument||d.$11.contentWindow.document;c.readyState=="complete"&&!e&&d.$18(a,b)},j)};b.$18=function(a,b){if(this.$19())return;this.$7=c("setTimeout")(b,l);this.$16(a)};b.$20=function(){c("clearInterval")(this.$5),c("clearTimeout")(this.$6),c("clearTimeout")(this.$7),c("clearTimeout")(this.$8)};b.$19=function(){if(document.hidden||Date.now()-this.$9>=i){this.$10=!0;return!0}return!1};b.$16=function(a){if(this.$19())return;c("goURI")(a)};b.$14=function(){this.$4||(this.$4={app_referrer:"",app:"",country:""}),c("BanzaiLogger").create({signal:!0,delay:1e3}).log("DirectDownloadLoggerConfig",{event:c("DirectDownloadEvents").logged_out_banner_upgrade_button_click,app_referrer:this.$4.app_referrer,app:this.$4.app,country:this.$4.country})};return a}();g["default"]=a}),98);
__d("HeaderTransparencyConsentEventParam",[],(function(a,b,c,d,e,f){a=Object.freeze({LOGIN_BUTTON_CLICK:"ln",REG_BUTTON_CLICK:"reg"});f["default"]=a}),66);
__d("MLoginEmailDomainTypeahead",["MDOM","MLoginTopDomainsConfig","MTypeaheadEmailDomainSource","Style","TypeaheadMobile"],(function(a,b,c,d,e,f,g){"use strict";var h={};function a(a){if(c("MLoginTopDomainsConfig").topEmailDomains.length===0)return;try{var b=d("MDOM").find(a,"input"),e=b.parentNode;e=new(c("TypeaheadMobile"))(e,b);var f=0;e.setDatasource(new(c("MTypeaheadEmailDomainSource"))([].concat(c("MLoginTopDomainsConfig").topEmailDomains),function(){return function(a){return{name:"@"+a,display:"@"+a,uri:"#",id:f++}}}));var g=null;e.listen("keydown",function(a){g=a});e.listen("show",function(b){b&&b.show&&b.show.length>0&&!h[a]&&(h[a]=!0)});e.listen("hide",function(){h[a]=!1});e.listen("choose",function(){g&&(g.kill(),g=null)});e.listen("rendered",function(){try{var e=d("MDOM").find(a,"div","jx-typeahead-results"),f=b.parentNode.style.width;f&&c("Style").set(e,"width",f)}catch(a){}})}catch(a){}}g.init=a}),98);
__d("MLoginFormError",["cx","invariant","MCSS","MDOM"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j="_3qsy",k="_3qs-";function a(a,b){b!==null||i(0,653),c("MCSS").addClass(a,j),c("MCSS").addClass(a,k),d("MDOM").listen(a,"input",null,function(b){c("MCSS").removeClass(a,k)})}function b(a){c("MCSS").removeClass(a,j),c("MCSS").removeClass(a,k)}g.set=a;g.unset=b}),98);
__d("MRegClientLoggingEvents",[],(function(a,b,c,d,e,f){a=Object.freeze({STARTED:"started",WELCOME_NEXT:"welcome_next",NAME_NEXT:"name_next",CONTACTPOINT_NEXT:"contactpoint_next",BIRTHDAY_NEXT:"birthday_next",GENDER_NEXT:"gender_next",PASSWORD_NEXT:"password_next",TOS_NEXT:"tos_next",NAME_BACK:"name_back",CONTACTPOINT_BACK:"contactpoint_back",BIRTHDAY_BACK:"birthday_back",GENDER_BACK:"gender_back",PASSWORD_BACK:"password_back",TOS_BACK:"tos_back",WELCOME_ACQUIRED:"welcome_acquired",NAME_ACQUIRED:"name_acquired",CONTACTPOINT_ACQUIRED:"contactpoint_acquired",BIRTHDAY_ACQUIRED:"birthday_acquired",GENDER_ACQUIRED:"gender_acquired",PASSWORD_ACQUIRED:"password_acquired",TOS_ACQUIRED:"tos_acquired",CHANGE_LANGUAGE_ACQUIRED:"change_language_acquired",CHANGE_LANGUAGE_ACQUIRED_NAME:"change_language_acquired_name",CHANGE_LANGUAGE_ACQUIRED_CONTACTPOINT:"change_language_acquired_contactpoint",CHANGE_LANGUAGE_ACQUIRED_BIRTHDAY:"change_language_acquired_birthday",CHANGE_LANGUAGE_ACQUIRED_GENDER:"change_language_acquired_gender",CHANGE_LANGUAGE_ACQUIRED_PASSWORD:"change_language_acquired_password",UPLOAD_CONTACTS_ACQUIRED:"upload_contacts_acquired",DISABLE_CONTACT_UPLOAD_ACQUIRED:"disable_contact_upload_acquired",PHONE_SWITCH_TO_EMAIL:"phone_switch_to_email",EMAIL_SWITCH_TO_PHONE:"email_switch_to_phone",ONLY_FIRST_NAME_EMPTY:"only_first_name_empty",ONLY_LAST_NAME_EMPTY:"only_last_name_empty",SUBMIT:"submit",BIRTHDAY_INTERACTION:"birthday_interaction",PASSWORD_INTERACTION:"password_interaction",NAME_INTERACTION_FIRST:"name_interaction_first_name",NAME_INTERACTION_LAST:"name_interaction_last_name",CONTACTPOINT_INTERACTION:"contactpoint_interaction",GENDER_INTERACTION:"gender_interaction",APPS_INSTALLED_LOGIN_VIEW:"apps_installed_login_view",APPS_INSTALLED_ACCOUNT_SWITCHER_VIEW:"apps_installed_account_switcher_view",APPS_INSTALLED_SIDELOAD_VIEW:"apps_installed_sideload_view",APPS_INSTALLED_INVITE_FRIENDS:"apps_installed_invite_friends",APPS_INSTALLED_ON_REG_BUTTON_CLICK_FROM_LOGIN_VIEW:"apps_installed_on_reg_button_click_from_login_view",APPS_INSTALLED_ON_REG_BUTTON_CLICK_FROM_ACCOUNT_SWITCHER_VIEW:"apps_installed_on_reg_button_click_from_account_switcher_view",NAME_VISIBLE:"name_visible",CP_VISIBLE:"cp_visible",PASSWORD_VISIBLE:"password_visible",GENDER_VISIBLE:"gender_visible",BIRTHDAY_VISIBLE:"birthday_visible",SUBMIT_VISIBLE:"submit_visible",ALREADY_HAVE_ACCOUNT_LINK_VISIBLE:"already_have_account_link_visible",FIRST_NAME_FOCUS:"first_name_focus",LAST_NAME_FOCUS:"last_name_focus",CP_FOCUS:"cp_focus",PASSWORD_FOCUS:"password_focus",GENDER_FOCUS:"gender_focus",BIRTHDAY_FOCUS:"birthday_focus"});f["default"]=a}),66);
__d("PlatformOAuthDialogLoginFunnelLogger",["FBLogger","QPLE2E","URI","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=1;a=function(a,b,d,e,f,g){e===void 0&&(e=!0);if(null==d||""===d||e&&(null==b||""===b||0===b)){c("FBLogger")("platform_login_web_funnel_client_js").mustfix("\nerror: null_required_field\naction: "+a+"\nloggerId: "+String(d)+"\ncbt: "+String(b)+"\n        ");return}e="number"!==typeof b?parseInt(b,10):b;b=Date.now()-(isNaN(e)?0:e);var h=j(),m=k();h={string:{logger_id:d},"int":{first_paint_time:h,response_start_time:m,cbt_delta:b}};m={"int":{client_funnel_version:i,cbt:e},string:{},bool:{duo_like_passwordless_user:g}};m.string.gdp_type=f;if(a==="client_logged_out_init_impression"){b=l();m.string.login_uri=b}c("QPLE2E").logPoint(c("qpl")._(195562276,"891"),a,d,{pointData:h,annotations:m})};var j=function(){if(m()){var a=window.performance.getEntriesByType("paint").filter(function(a){return"first-paint"===a.name});if(null==a||0<!a.length)return null;a=a[0].startTime+a[0].duration;return a}return null},k=function(){if(m()){var a=window.performance.getEntriesByType("navigation");return null==a||0<!a.length?null:a[0].responseStart}return null},l=function(){return(h||(h=c("URI"))).getRequestURI().setQueryString("").toString()},m=function(){return window.performance&&typeof window.performance.getEntriesByType==="function"};g.CLIENT_FUNNEL_VERSION=i;g.log=a}),98);
__d("XLoginProfileInfoFetcherController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/login/pp/",{contactpoint:{type:"String"},pwdprefill:{type:"Bool",defaultValue:!1}})}),null);
__d("XLoginWebviewDetectionAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/login/async/wvdp/",{})}),null);
__d("XOAuthErrorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/oauth/error/",{error_code:{type:"Enum",enumType:1},encrypted_query_string:{type:"String"},display:{type:"Enum",enumType:1}})}),null);
__d("XZeroHeaderUserConsentProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/zero/h_consent/",{ce:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XZeroTokenHeaderUserConsentProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/zero/TOS_process/",{})}),null);
__d("MLoginController",["cx","fbt","DeferredCookie","FBBrowserPasswordEncryption","FBLogger","IorgMaskHeaderPrefillTypedLogger","Keys","LoggedOutLocaleEventsClientLogger","LoginServicePasswordEncryptDecryptEventTypedLogger","MAjaxify","MAnimator","MButton","MCSS","MDOM","MDataStore","MEvent","MGetInstalledRelatedApps","MHistory","MLoginEmailDomainTypeahead","MLoginFormError","MMsisdnJioApiModule","MRegClientLoggingEvents","MRequest","MViewport","PlatformOAuthDialogLoginFunnelLogger","Run","SpatialNavigation","Stratcom","SubscriptionsHandler","ThisControllerNoLongerExists","URI","XAsyncRequest","XLoginProfileInfoFetcherController","XLoginWebviewDetectionAsyncController","XOAuthErrorController","XZeroHeaderUserConsentProcessController","XZeroTokenHeaderUserConsentProcessController","bx","ge","gkx","goURI","killswitch","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k="_pg8",l="stepOneIdentification",m="stepTwoAuthenticaiton",n="auth",o=500,p=5,q=/^(\/)?(v\d+\.\d+)?\/dialog\/oauth.*$/,r={_initTwoStepsListeners:function(){var a=this,b,d=new(c("SubscriptionsHandler"))();d.addSubscriptions((b=c("Stratcom")).listen("click","m_login_change_cp_link",function(b){b.prevent(),a._logAction("clicked_not_you"),a._showEditableCPFieldOnAuthStep()}),b.listen("m:history:change",null,function(b){var d=b.getData();if(d.path){d=new(j||(j=c("URI")))(d.path);a._initialURI.getPath()===d.getPath()&&(b.prevent(),b.getData().soft===n?a._onEnteringCP():a._onBackToCP())}}),b.listen("click","m_login_next_btn",this._handleNextButtonClick.bind(this)));c("MDOM").listen(this.oneTimePasswordLink,"click",null,this._onSendOneTimePassword.bind(this));b.listen("m:page:unload",null,function(){c("Stratcom").removeCurrentListener(),d.release()})},initRegButton:function(a){var b=a.root;this.regURI=a.regURI;this.regButton=c("MDOM").find(b,"a","m_reg_button");this.regButton.removeAttribute("href");c("MDOM").listen(this.regButton,"click",null,this._sendLoginRequestFromReg.bind(this))},initCloseButton:function(a){c("MDOM").listen(a,"click",null,function(){window.close()})},initSendNotificationButton:function(a){var b=this;c("MDOM").listen(a,"click",null,function(){b._sendLoginNotification()})},initEnterPasswordButton:function(a){var b=this;c("MDOM").listen(a,"click",null,function(){b.inPasswordScreen=!0,b._hideAll(b.notificationScreenElements),b._showAll(b.passwordScreenElements),b.loginNotificationRequested&&(d("MCSS").hide(b.passwordScreenNotificationButton),d("MCSS").hide(b.orLine),d("MCSS").show(b.passwordScreenNotificationSentMessage))})},initLoginForm:function(a){a.delayInit>0?window.setTimeout(function(){r.initLoginFormImpl(a)},a.delayInit):r.initLoginFormImpl(a)},initLoginFormImpl:function(a){var b=this;this.root=a.root;this.isTwoStepsLogin=a.isTwoStepsLogin;this.isActionLoggingEnabled=a.isActionLoggingEnabled;this.isCredsManagerEnabled=a.isCredsManagerEnabled;this.isCredsSavingEnabled=a.isCredsSavingEnabled;this.isPasswordlessEnabled=a.isPasswordlessEnabled;this.doNotShowUserHeader=a.doNotShowUserHeader;this.shouldWaitForPasswordSave=a.shouldWaitForPasswordSave;this.shouldPrefillJioHeaderForRegFromLogin=a.shouldPrefillJioHeaderForRegFromLogin;this.jioPrefilled=!1;this.igCPLogin=!1;this.shouldProcessUserConsentForTokenHeader=a.shouldProcessUserConsentForTokenHeader;this.shouldProcessUserConsentForHeader=a.shouldProcessUserConsentForHeader;this.onErrorRegURI=a.onErrorRegURI;this.loginForm=c("MDOM").find(this.root,"form","m_login_form");this.loginForm.action=a.ajaxURI;this.loginButton=c("MDOM").find(this.root,"button","m_login_button");var e=c("MDOM").scry(this.root,"a","m_login_button_alt");e=e.pop();this.loginButtonAlt=null;this.isSmartLock=c("ge")("is_smart_lock");this.clearPrefillMaskOnKeydown=a.clearPrefillMaskOnKeydown;this.pubKeyData=a.pubKeyData;this.shouldUseEmailDomainTypeahead=a.shouldUseEmailDomainTypeahead;this.showTwoStepDuoLikePasswordless=a.showDuoLikePasswordless;this.showSingleStepDuoLikePasswordless=a.showSingleStepDuoLikePasswordless;this.trackingPreference=a.trackingPreference;window.PublicKeyCredential&&window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable?window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(function(a){a?b._authenticatorAvailableStatus="true":b._authenticatorAvailableStatus="false",b._logAction("authenticator_check")})["catch"](function(a){b._authenticatorAvailableStatus="error",b._logAction("authenticator_check")}):(this._authenticatorAvailableStatus="unsupported",this._logAction("authenticator_check"));e!==void 0&&(this.loginButtonAlt=e);(a.shouldShowSmartLockSelector||this._isCredentialsManagerEnabled())&&this._initSmartLockAccountChooser();this.isTwoStepsLogin?(this.hadCPPrefilled=!1,this.shouldClearPasswordIfOnlyPasswordPrefilled=!0,this._initialURI=(j||(j=c("URI"))).getRequestURI(),this.shouldAutoLandOnStep2=a.shouldAutoLandOnStep2,this.prefillContactpointHiddenInput=c("ge")("prefill_contact_point"),this.emailComponentsWrapper=c("ge")("email_components_wrapper"),this.passwordComponentWrapper=c("ge")("password_component_wrapper"),this.stepTwoCPDisplayContainer=c("ge")("step_two_cp_display"),this.nextButton=c("MDOM").find(this.root,"button","m_login_next_btn"),this.cpText=c("MDOM").scry(this.root,"span","m_login_cp_text").pop(),this.cpDisplayLabel=c("MDOM").scry(this.root,"span","contactpoint_display_label").pop(),this.passwordFieldLabel=c("MDOM").scry(this.root,"span","password_field_label").pop(),this.profilePicElem=c("MDOM").scry(this.root,"*","profile_pic_elem").pop(),this.oneTimePasswordLink=c("MDOM").scry(this.root,"a","one_time_password_link").pop(),this.otpSentMsg=c("MDOM").scry(this.root,"div","otp_retrieve_desc").pop(),this.userName=c("MDOM").scry(this.root,"span","m_recognized_user_name").pop(),this.moreLinks=c("MDOM").scry(this.root,"div","m_login_more_links").pop(),this.progressBar=c("MDOM").find(this.root.ownerDocument,"div","login_identify_step_progress_bar"),this.languageSelector=c("MDOM").find(this.root.ownerDocument,"div","language_selector"),this.identifyStepElements=c("MDOM").scry(this.root.ownerDocument,"div","login_identify_step_element"),this.identifyStepElements.push(this.languageSelector),this.passwordStepElements=c("MDOM").scry(this.root.ownerDocument,"div","login_password_step_element"),this._initTwoStepsListeners(),d("MDataStore").set(this.loginForm,"step",l)):this.prefillContactpointHiddenInput=c("ge")("m_login_email");a.delayInit>0&&(this.loginButton.disabled=!1);this.loginButton.type="button";this.notice=c("MDOM").find(this.root,"div","m_login_notice");this.emailInput=this._getElem("input","m_login_email");this.passwordInput=this._getElem("div","m_login_password");this.emailInputContainer=c("ge")("email_input_container");this.passwordInputDOM=c("MDOM").find(this.passwordInput,"input");this.showTwoStepDuoLikePasswordless&&(this.sendLoginNotificationButton=c("MDOM").find(this.root,"button","login_notification_button"),this.notificationSentMessage=c("MDOM").find(this.root,"div","notification_sent_message"),this.sendNotificationSpinner=c("MDOM").find(this.root,"div","send_notification_spinner"));if(this.showSingleStepDuoLikePasswordless){this.notificationScreenElements=(e=c("MDOM")).scry(this.root.ownerDocument,"div","notification_screen_element");this._initSendNotificationComponentsForPasswordless();this.passwordScreenElements=e.scry(this.root.ownerDocument,"div","password_screen_element");this.passwordScreenNotificationButton=e.find(this.root,"button","password_screen_notification_button");this.passwordScreenNotificationSentMessage=e.find(this.root,"div","password_screen_notification_sent_message");this.orLine=e.find(this.root,"div","single_screen_or_line")}this.tryNumber=this._getElem("input","m_login_try_number");this.unrecognizedTriesCountInput=this._getElem("input","m_login_unrecognized_tries");this.upsell=this._getElem("div","m_login_upsell");this.numPasswordErrorAttempts=0;this.unrecognizedContactpointErrorCount=0;this.originalPasswordPlaceholder=this.passwordInputDOM.getAttribute("placeholder");this.userInfoContainer=c("ge")("user_info_container");this.oauthLoginButtonContainer=c("ge")("oauth_login_button_container");this.oauthLoginDescContainer=c("ge")("oauth_login_desc_container");this.passwordLabelContainer=c("ge")("pwd_label_container");this.otpButtonContainer=c("ge")("otp_button_elem_container");this.otpRetrieveDescContainer=c("ge")("otp_retrieve_desc_container");this.userInfoAfterFailureElements=c("MDOM").scry(this.root.ownerDocument,"div","user_info_after_failure_element");this.otpPasswordPlaceholder=i._("Password or one-off password");this.shouldPrefillJioHeaderForRegFromLogin&&d("MMsisdnJioApiModule").fetchMsisdnAndCache();this.shouldUseEmailDomainTypeahead&&this._initTypeahead();c("MDOM").listen(this.loginButton,"click",null,this._handleSubmitButtonClick.bind(this));this.loginButtonAlt!==null&&c("MDOM").listen(this.loginButtonAlt,"click",null,this._handleSubmitButtonClick.bind(this));this.hiddenInputPrefillSource=c("ge")("prefill_source");this.hiddenInputPrefillSource!==null&&this.hiddenInputPrefillSource.value==="header"&&this.clearPrefillMaskOnKeydown===!0&&c("MDOM").listen(this.emailInput,"keydown",null,function(a){b.clearPrefillMaskOnKeydown===!0&&(b.clearPrefillMaskOnKeydown=!1,b.emailInput.value="",new(c("IorgMaskHeaderPrefillTypedLogger"))().setEvent("clear_masked_prefill_login").log())});this.showSingleStepDuoLikePasswordless&&(c("MDOM").listen(this.emailInput,"keyup",null,function(){b._toggleNotificationButtonState()}),this._passwordlessPollingTimer=window.setInterval(this._toggleNotificationButtonState.bind(this),200));e=a.listenKeyDown?"keydown":"keyup";this.isTwoStepsLogin?(this.nextButton.setAttribute("type","button"),this.passwordInputDOM.setAttribute("tabindex",-1),c("MDOM").listen(this.loginForm,"keydown",null,function(a){a.getRawEvent().keyCode===c("Keys").RETURN?d("MDataStore").get(b.loginForm,"step","")===l?b._handleNextButtonClick():b._handleSubmitButtonClick():a.getRawEvent().keyCode===c("Keys").TAB&&d("MDataStore").get(b.loginForm,"step","")===l&&b._handleNextButtonClick()})):c("MDOM").listen(this.loginForm,e,null,function(a){a.getRawEvent().keyCode===c("Keys").RETURN&&b._handleSubmitButtonClick()});a.clearOnDelete&&c("MDOM").listen(this.emailInput,e,null,function(a){a.getRawEvent().keyCode===c("Keys").BACKSPACE&&(b.emailInput.value="")});if(this.isActionLoggingEnabled){(e=c("Stratcom")).listen("change","m_login_email",function(a){b._logAction("changed_user_identifier"),b.shouldDisplayOTPMsg=!1,b.displayOTPLink=!1,b._rerenderAuthStepCPDisplay()});e.listen("change","m_login_password",function(a){b._logAction("changed_password")});e.listen("click","m_reg_button",function(a){c("gkx")("20873"),d("MGetInstalledRelatedApps").logmTouchInstalledRelatedAppsOnRegButtonClick(c("MRegClientLoggingEvents").APPS_INSTALLED_ON_REG_BUTTON_CLICK_FROM_LOGIN_VIEW),b.emailInput.value===""?b._logAction("clicked_reg_identifier_blank"):b._logAction("clicked_reg_identifier_filled"),b.passwordInputDOM.value===""?b._logAction("clicked_reg_password_blank"):b._logAction("clicked_reg_password_filled")});e.listen("click","language_selector",function(a){b.clickedLanguageSelector||(b._logAction("clicked_language_selector"),b.clickedLanguageSelector=!0)});d("MEvent").listen(this.root,"click",function(){b._logAction("clicked_on_login_screen")});this.hasFocusedAlready=!1;this.loginNotificationRequested=!1;this.loginNotificationRequestProcessed=!1;d("Run").onAfterLoad(function(){b._logAction("form_load_client")});e=c("MDOM").scry(this.root,"input",null);e.forEach(function(a){d("MEvent").listen(a,"focus",b._processFormFocus.bind(b))})}this.shouldAutoLandOnStep2&&this.emailInput.value.trim()!==""&&(this.hadCPPrefilled=!0,c("MHistory").pushSoftState(n));c("Stratcom").listen("click",["change_language"],function(d){new(c("LoggedOutLocaleEventsClientLogger"))(b.root,a.datrCookie).logLocaleEvent(d,"login","login")});c("Stratcom").listen("click",["more_language"],function(d){new(c("LoggedOutLocaleEventsClientLogger"))(b.root,a.datrCookie).logMoreLanguage("login","login")});if(!c("killswitch")("PLATFORM_LOGIN_ASYNC_WVDP_REQUEST")){this.usePasswordlessLoginForWvdp=!1;e=this._collectClientSignals();var f=c("ge")("bi_xrwh"),g=new(j||(j=c("URI")))(window.location.href);g=new j(g.getQueryData().next);e!==null&&f!==null&&q.test(g.getPath())&&new(c("XAsyncRequest"))().setMethod("POST").setData({bi_wvdp:e.value,bi_xrwh:f.value,request_uri:window.location.href}).setURI(c("XLoginWebviewDetectionAsyncController").getURIBuilder().getURI()).setHandler(function(a){a=a.payload;a&&a.eligible_for_passwordless&&(b.usePasswordlessLoginForWvdp=!0,b.notificationScreenDescriptionText=c("MDOM").find(b.root,"div","notification_screen_description_text"),b._initSendNotificationComponentsForPasswordless());if(a&&a.error_code){a=c("XOAuthErrorController").getURIBuilder().setEnum("error_code",a.error_code).setEnum("display","touch").getURI();(j||(j=c("URI"))).goURIOnWindow(a,void 0,!0)}}).send()}d("SpatialNavigation").registerNavigationHandlerForPortalTV()},initAccountRecoveryFunnelLogging:function(a,b,c){},_initTypeahead:function(){try{var a=this.emailInputContainer;d("MLoginEmailDomainTypeahead").init(a)}catch(a){}},_initSmartLockAccountChooser:function(a){var b=this;a===void 0&&(a="silent");window.PasswordCredential&&(this._logAction("smart_lock_supported"),navigator.credentials!==null&&(this._logAction("smart_lock_showed"),navigator.credentials.get({password:!0,mediation:a}).then(function(c){c!==null&&c.type==="password"&&c.password!==null&&c.id!==null?(b.emailInput.setAttribute("value",c.id),b.passwordInputDOM.setAttribute("value",c.password),b._logAction("smart_lock_selected"),b.isSmartLock.setAttribute("value",!0),a==="required"&&b._sendLoginRequest()):(b.passwordInputDOM.setAttribute("value",""),b._logAction("smart_lock_canceled"),a==="silent"&&b._initSmartLockAccountChooser("required"))})["catch"](function(a){c("FBLogger")("login").catching(a).warn("smart lock promise fail")})))},_processFormFocus:function(a){if(a.target===this.passwordInputDOM&&this.isPasswordlessEnabled&&!this.showTwoStepDuoLikePasswordless&&!this.showSingleStepDuoLikePasswordless){if(this.loginNotificationRequested)return;this.loginNotificationRequested=!0;this._sendLoginNotification()}this._logFormFocus()},_initSendNotificationComponentsForPasswordless:function(){this.notificationScreenLoginButton=c("MDOM").find(this.root,"button","notification_screen_login_button"),this.sendNotificationSpinner=c("MDOM").find(this.root,"div","send_notification_spinner"),this.notificationScreenNotificationSentMessage=c("MDOM").find(this.root,"div","notification_screen_notification_sent_message")},_singleScreenDuoLikePasswordlessSendNotificationHandler:function(a){d("MCSS").hide(this.sendNotificationSpinner),this.loginNotificationRequestProcessed=!0,a instanceof Object&&a.nonce!==""&&a.nonce!==void 0?(this.inPasswordScreen?(d("MCSS").hide(this.passwordScreenNotificationButton),d("MCSS").show(this.passwordScreenNotificationSentMessage),d("MCSS").hide(this.orLine)):(d("MCSS").hide(this.notificationScreenLoginButton),this.notificationScreenDescriptionText&&d("MCSS").hide(this.notificationScreenDescriptionText),d("MCSS").show(this.notificationScreenNotificationSentMessage)),this._passwordlessPollingData.nonce=a.nonce,this._passwordlessPollingTimer=window.setInterval(this._pollPasswordlessNonce.bind(this),2e3)):(c("MDOM").setContent(this.notice,this._getBlankEmailErrorFBT()),d("MCSS").show(this.notice),d("MLoginFormError").set(this.emailInput,"error"),this.loginNotificationRequested=!1)},_twoScreenDuoLikePasswordlessSendNotificationHandler:function(a){d("MCSS").hide(this.sendNotificationSpinner),this.loginNotificationRequestProcessed=!0,a instanceof Object&&a.nonce!==""&&a.nonce!==void 0?(d("MCSS").hide(this.sendLoginNotificationButton),d("MCSS").show(this.notificationSentMessage),this._passwordlessPollingData.nonce=a.nonce,this._passwordlessPollingTimer=window.setInterval(this._pollPasswordlessNonce.bind(this),2e3)):(c("MDOM").setContent(this.notice,this._getBlankEmailErrorFBT()),d("MCSS").show(this.notice),d("MLoginFormError").set(this.emailInput,"error"),d("MDataStore").set(this.emailInput,"error",!0),c("MHistory").popSoftState(n),this.nextButton.disabled=!1,this.loginNotificationRequested=!1)},_sendNotificationHandler:function(a){a instanceof Object&&a.nonce!==""&&a.nonce!==void 0&&(this._passwordlessPollingData.nonce=a.nonce,this._passwordlessPollingTimer=window.setInterval(this._pollPasswordlessNonce.bind(this),2e3))},_sendLoginNotification:function(){var a=this,b=this.emailInput.value,e=new(j||(j=c("URI")))(window.location.href),f=e.getQueryData().app_id;if(f==null)return;e=new j(new j(this.loginForm.action).getQueryData().next);var g=e.getQueryData().logger_id;e=(e=e.getQueryData().scope)!=null?e:"";new(c("XAsyncRequest"))().setMethod("POST").setData({contact_point:b,app_id:f,logger_id:g,tp:this.trackingPreference,scope:e}).setURI(d("ThisControllerNoLongerExists").__DEADURI__("9c2zw6qz")).setHandler(function(b){b=b.payload;a._passwordlessPollingData={app_id:f,logger_id:g,tp:a.trackingPreference};a.showTwoStepDuoLikePasswordless?a._twoScreenDuoLikePasswordlessSendNotificationHandler(b):a.showSingleStepDuoLikePasswordless||a.usePasswordlessLoginForWvdp?a._singleScreenDuoLikePasswordlessSendNotificationHandler(b):a._sendNotificationHandler(b)}).send();(this.showTwoStepDuoLikePasswordless||this.showSingleStepDuoLikePasswordless||this.usePasswordlessLoginForWvdp)&&d("MCSS").show(this.sendNotificationSpinner)},_pollPasswordlessNonce:function(){var a=this;new(c("XAsyncRequest"))().setMethod("POST").setURI(d("ThisControllerNoLongerExists").__DEADURI__("dlyihgxgj")).setData(this._passwordlessPollingData).setHandler(function(b){b=b.payload;if(b.result==="success"){window.clearInterval(a._passwordlessPollingTimer);var d=new(j||(j=c("URI")))(new j(a.loginForm.action).getQueryData().next);c("goURI")(d.toString())}else b.result==="denied"&&window.clearInterval(a._passwordlessPollingTimer)}).send()},_logFormFocus:function(){if(this.hasFocusedAlready)return;this.hasFocusedAlready=!0;this._logAction("form_focus")},_getElem:function(a,b){a=c("MDOM").scry(this.root,a,b);return a.length===0?null:a[0]},_animateScrollToElem:function(a){if(!a)return;var b=c("MViewport").getScrollPos().y,d=a.offsetTop;a=function(a){c("MViewport").scrollTo(0,b+a*(d-b-p))};new(c("MAnimator"))().start(a,null,function(){},o)},_autoFocusIfNeeded:function(a){if(!this.emailInput||!this.passwordInput)return;if(!this.passwordInputDOM)return;var b=this.emailInput.value===""||a.m_login_email.error;a=this.passwordInputDOM.value===""||a.m_login_password.error;(b||a)&&(b?this.emailInput.focus():a&&this.passwordInputDOM.focus())},_sendLoginRequest:function(){var a=this;c("DeferredCookie").flushAllCookiesWithoutRecordingConsentDONOTCALLBEFORECONSENT();d("MCSS").hide(this.notice);d("MButton").setEnabled(this.loginButton,!1);this.isTwoStepsLogin&&d("MButton").setEnabled(this.nextButton,!1);window.setTimeout(d("MButton").setEnabled.bind(null,this.loginButton,!0),15e3);this.loginButtonAlt!==null&&(d("MButton").setEnabled(this.loginButtonAlt,!1),window.setTimeout(d("MButton").setEnabled.bind(null,this.loginButtonAlt,!0),15e3));this.tryNumber!==null&&this.tryNumber.setAttribute("value",this.numPasswordErrorAttempts);this.unrecognizedTriesCountInput!==null&&(this.unrecognizedTriesCountInput.value=this.unrecognizedContactpointErrorCount);var e=new(j||(j=c("URI")))(this.loginForm.action).addQueryData("ig_cp_login",this.igCpLogin),f="#PWD_BROWSER",g=5,h=Math.floor(Date.now()/1e3).toString(),i=this._collectClientSignals();i!==null&&this.loginForm.appendChild(i);try{if((window.crypto||window.msCrypto)&&this.pubKeyData){i=b("FBBrowserPasswordEncryption");i=i.encryptPassword;var k=b("promiseDone");k(i(this.pubKeyData.keyId,this.pubKeyData.publicKey,this.passwordInputDOM.value,h),function(b){b=c("MDOM").create("input",{type:"hidden",name:"encpass",value:b});a.loginForm.appendChild(b);a.passwordInputDOM.removeAttribute("name");a.loginForm.action=e.toString();d("MAjaxify").form(null,a.loginForm,null,"nocache",null,!0,[{response:a._onLoginResponse.bind(a)}])},function(c){var i=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new i().setError("BrowserEncryptionFailure").setErrorMessage(c.message).setPasswordTag(f).setPasswordEncryptionVersion(g).setPasswordTimestamp(h).logVital();a.loginForm.action=e.toString();d("MAjaxify").form(null,a.loginForm,null,"nocache",null,!0,[{response:a._onLoginResponse.bind(a)}])});return}}catch(a){k=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new k().setError("BrowserEncryptionClientFailure").setErrorMessage(a.message).setPasswordTag(f).setPasswordEncryptionVersion(g).setPasswordTimestamp(h).logVital()}if(!(window.crypto||window.msCrypto)&&this.pubKeyData){i=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new i().setError("BrowserEncryptionFailure").setErrorMessage("Crypto object is undefined").setPasswordTag(f).setPasswordEncryptionVersion(g).setPasswordTimestamp(h).logVital()}this.loginForm.action=e.toString();d("MAjaxify").form(null,this.loginForm,null,"nocache",null,!0,[{response:this._onLoginResponse.bind(this)}])},_sendLoginRequestFromReg:function(){c("DeferredCookie").flushAllCookiesWithoutRecordingConsentDONOTCALLBEFORECONSENT();this.shouldProcessUserConsentForTokenHeader&&this._processUserConsentForTokenHeader();this.shouldProcessUserConsentForHeader&&this._processUserConsentForHeader("reg");if(this.emailInput.value===""||this.passwordInput.value===""){c("goURI")(this.regURI);return}d("MCSS").hide(this.notice);d("MButton").setEnabled(this.loginButton,!1);window.setTimeout(d("MButton").setEnabled.bind(null,this.loginButton,!0),15e3);this.loginButtonAlt!==null&&(d("MButton").setEnabled(this.loginButtonAlt,!1),window.setTimeout(d("MButton").setEnabled.bind(null,this.loginButtonAlt,!0),15e3));d("MAjaxify").form(null,this.loginForm,null,"nocache",null,!0,[{response:this._onLoginFromRegResponse.bind(this)}])},_updatePagePrefillState:function(){var a=c("ge")("first_prefill_type"),b=null;a!=null&&a.value!==""&&(b=a.value);a=c("ge")("first_prefill_source");var d=null;a!=null&&a.value!==""&&(d=a.value);a=c("ge")("prefill_type");var e=null;a!=null&&a.value!==""&&(e=a.value);a=c("ge")("prefill_source");var f=null;a!=null&&a.value!==""&&(f=a.value);a=c("ge")("had_cp_prefilled");var g=null;a!=null&&a.value!==""&&(g=a.value);a=c("ge")("had_password_prefilled");var h=null;a!=null&&a.value!==""&&(h=a.value);this.pagePrefillState={first_prefill_type:b,first_prefill_source:d,prefill_type:e,prefill_source:f,had_cp_prefilled:g,had_password_prefilled:h}},_logAction:function(a){if(!this.isActionLoggingEnabled)return;this._updatePagePrefillState()},_handleSubmitButtonClick:function(){this._logAction("clicked_submit"),this.emailInput!==null&&this.emailInput.value===""?this._logAction("clicked_submit_identifier_blank"):this._logAction("clicked_submit_identifier_filled"),this.passwordInputDOM.value===""?this._logAction("clicked_submit_password_blank"):this._logAction("clicked_submit_password_filled"),this.shouldProcessUserConsentForTokenHeader&&this._processUserConsentForTokenHeader(),this.shouldProcessUserConsentForHeader&&this._processUserConsentForHeader("ln"),this._sendLoginRequest()},_processUserConsentForTokenHeader:function(){var a=c("XZeroTokenHeaderUserConsentProcessController").getURIBuilder().getURI();new(c("MRequest"))(a).setMethod("POST").send()},_processUserConsentForHeader:function(a){a=c("XZeroHeaderUserConsentProcessController").getURIBuilder().setEnum("ce",a).getURI();new(c("MRequest"))(a).setMethod("POST").send()},_showBlankPWError:function(a){c("MDOM").setContent(this.notice,this._getBlankPasswordErrorFBT(a)),d("MCSS").show(this.notice)},_onSendOneTimePassword:function(a){var b=this;a.prevent();d("MAjaxify").ajaxify(null,null,new(c("MRequest"))(this.otp_uri).setMethod("POST"),null,[{response:function(a){a=a.payload;if(a.msg===null)return;c("MDOM").setContent(b.otpSentMsg,a.msg);b.shouldDisplayOTPMsg=!0;b._rerenderAuthStepCPDisplay()}}])},_populateProfileInfo:function(a){var b=this;if(this.doNotShowUserHeader){a();return}this._updatePagePrefillState();var e=c("XLoginProfileInfoFetcherController").getURIBuilder().setString("contactpoint",this.emailInput.value).setBool("pwdprefill","true"===this.pagePrefillState.had_password_prefilled).getURI();d("MAjaxify").ajaxify(null,null,new(c("MRequest"))(e).setMethod("GET"),null,[{response:function(d){b.nextButton.disabled=!1;if(!d.payload){a();return}d=d.payload;if(d.profile_pic_elem){var e=b.profilePicElem.parentNode;c("MDOM").replace(b.profilePicElem,d.profile_pic_elem);b.profilePicElem=c("MDOM").scry(e,"*","profile_pic_elem").pop();b.displayProfilePic=!0}d.user_name&&b.userName&&(c("MDOM").setContent(b.userName,d.user_name||b.emailInput.value),b.displayUserName=!0);d.otp_uri&&b.oneTimePasswordLink&&(b.otp_uri=d.otp_uri,b.displayOTPLink=!0);a()}}])},_getBlankEmailErrorFBT:function(){var a=i._("Sign up for an account."),b=c("MDOM").create("a");b.setAttribute("href",this.onErrorRegURI);c("MDOM").setContent(b,a);return i._("The email address or phone number that you've entered doesn't match any account. {reg_uri}",[i._param("reg_uri",b)])},_getBlankPasswordErrorFBT:function(a){var b=i._("Did you forget your password?"),d=c("MDOM").create("a");d.setAttribute("href",a.forgot_password_uri);c("MDOM").setContent(d,b);return i._("Please enter your password. {recovery_uri}",[i._param("recovery_uri",d)])},_onEnteringCP:function(){if(this.emailInput.value.trim()===""){c("MDOM").setContent(this.notice,this._getBlankEmailErrorFBT());d("MCSS").show(this.notice);d("MLoginFormError").set(this.emailInput,"error");d("MDataStore").set(this.emailInput,"error",!0);c("MHistory").popSoftState(n);return}d("MLoginFormError").unset(this.emailInput);d("MDataStore").set(this.emailInput,"error",!1);d("MDataStore").get(this.passwordInput,"error",!1)||d("MCSS").hide(this.notice);this.nextButton.disabled=!0;this._enableProgressBar();this._populateProfileInfo(this._goToPasswordStep.bind(this));return},_onBackToCP:function(){d("MDataStore").get(this.passwordInput,"error",!1)&&(d("MCSS").hide(this.notice),d("MDataStore").set(this.passwordInput,"error",!1),d("MCSS").removeClass(this.passwordInput,k)),this._goToIdentificationStep()},_hideAll:function(a){a.forEach(function(a){return d("MCSS").hide(a)})},_showAll:function(a){a.forEach(function(a){return d("MCSS").show(a)})},_rerenderAuthStepCPDisplay:function(){this.displayUserName&&(this.cpText&&d("MCSS").hide(this.cpText),this.cpDisplayLabel&&d("MCSS").hide(this.cpDisplayLabel),this.userName&&d("MCSS").show(this.userName));this.profilePicElem&&d("MCSS").conditionShow(this.profilePicElem,!!this.displayProfilePic);this.oneTimePasswordLink&&d("MCSS").conditionShow(this.oneTimePasswordLink,!!this.displayOTPLink);this.otpSentMsg&&(d("MCSS").conditionShow(this.otpSentMsg,!!this.shouldDisplayOTPMsg),this.shouldDisplayOTPMsg?(this.passwordInputDOM.setAttribute("placeholder",this.otpPasswordPlaceholder),this._animateScrollToElem(this.passwordFieldLabel)):this.passwordInputDOM.setAttribute("placeholder",this.originalPasswordPlaceholder));if(!this.stepTwoCPDisplayContainer||!this.emailComponentsWrapper)return;var a=this.displayUserName||this.displayProfilePic;d("MCSS").conditionShow(this.stepTwoCPDisplayContainer,!!a);d("MCSS").conditionShow(this.emailComponentsWrapper,!a)},_showEditableCPFieldOnAuthStep:function(){this.displayProfilePic=!1,this.displayUserName=!1,this.displayOTPLink=!1,this._rerenderAuthStepCPDisplay(),this.emailInput.focus()},_goToPasswordStep:function(){d("MDataStore").set(this.loginForm,"step",m);this.prefillContactpointHiddenInput.value!==this.emailInput.value&&this.passwordInputDOM.setAttribute("value","");if(this.shouldClearPasswordIfOnlyPasswordPrefilled){var a=c("ge")("had_cp_prefilled"),b=c("ge")("had_password_prefilled");a!=null&&b!=null&&(a.value==null||a.value==="false")&&b.value==="true"&&(this.shouldClearPasswordIfOnlyPasswordPrefilled=!1)}this._hideAll(this.identifyStepElements);this._showAll(this.passwordStepElements);this._rerenderAuthStepCPDisplay();this.moreLinks&&d("MCSS").addClass(this.moreLinks,"_2pie");d("MCSS").removeClass(this.passwordInput,"_1-z5");d("MCSS").removeClass(this.passwordComponentWrapper,"_1-z5");this.passwordInputDOM.removeAttribute("tabindex");this.showTwoStepDuoLikePasswordless&&(this.sendLoginNotificationButton.style.display="block");this.loginNotificationRequested?(d("MCSS").hide(this.sendLoginNotificationButton),this.loginNotificationRequestProcessed&&d("MCSS").hide(this.sendNotificationSpinner)):(d("MCSS").hide(this.notificationSentMessage),d("MCSS").hide(this.sendNotificationSpinner));this.cpText&&c("MDOM").setContent(this.cpText,this.emailInput.value);this.passwordInputDOM.focus()},_resetProgressBar:function(){this.progressBar.style.transitionDuration="0ms",this.progressBar.style["-webkit-transition-duration"]="0ms",this.progressBar.style["-moz-transition-duration"]="0ms",this.progressBar.style.transform="translateX(0%)",this.progressBar.style["-webkit-transform"]="translateX(0%)",this.progressBar.style["-moz-transform"]="translateX(0%)"},_enableProgressBar:function(){this.progressBar.style.transitionDuration="1000ms",this.progressBar.style["-webkit-transition-duration"]="1000ms",this.progressBar.style["-moz-transition-duration"]="1000ms",this.progressBar.style.transform="translateX(100%)",this.progressBar.style["-webkit-transform"]="translateX(100%)",this.progressBar.style["-moz-transform"]="translateX(100%)"},_goToIdentificationStep:function(){d("MDataStore").set(this.loginForm,"step",l),this._resetProgressBar(),this.displayUserName=!1,this.displayProfilePic=!1,this.displayOTPLink=!1,this.cpText&&d("MCSS").show(this.cpText),this.cpDisplayLabel&&d("MCSS").show(this.cpDisplayLabel),this.userName&&(c("MDOM").setContent(this.userName,""),d("MCSS").hide(this.userName)),d("MCSS").addClass(this.passwordInput,"_1-z5"),d("MCSS").addClass(this.passwordComponentWrapper,"_1-z5"),this.passwordInputDOM.setAttribute("tabindex",-1),this._hideAll(this.passwordStepElements),this._showAll(this.identifyStepElements),d("MDataStore").get(this.emailInput,"error",!1)&&c("MDOM").hide(this.upsell),this.moreLinks&&d("MCSS").removeClass(this.moreLinks,"_2pie"),this.emailInput.focus(),this.nextButton.disabled=!1},_handleNextButtonClick:function(){this.passwordInputDOM.value.trim()!==""&&this.prefillContactpointHiddenInput&&this.prefillContactpointHiddenInput.value===this.emailInput.value&&(this.hadCPPrefilled=!0),c("MHistory").pushSoftState(n),this.showTwoStepDuoLikePasswordless&&this._logDuoLikePasswordlessLoginScreenImpression()},_mayBeShowTwoStepsLoginAfterPwdFailure:function(a){var b=this;a=a.two_steps_after_failuer_payload;if(!a)return;var e=a.profileInfo,f=a.passwordFieldLabelElem;if(!e||!f)return;this.userInfoContainer&&c("MDOM").setContent(this.userInfoContainer,e);this.passwordLabelContainer&&c("MDOM").setContent(this.passwordLabelContainer,f);this._showAll(this.userInfoAfterFailureElements);d("MCSS").hide(this.emailInput);c("Stratcom").listen("click","m_login_change_cp_link",function(a){a.prevent(),d("MCSS").show(b.emailInput),b._hideAll(b.userInfoAfterFailureElements)});e=a.otpButtonElem;f=a.otpURI;a=a.otpRetrieveDescElem;if(!e||!f||!a)return;this.otpButtonContainer&&c("MDOM").setContent(this.otpButtonContainer,e);this.otpRetrieveDescContainer&&c("MDOM").setContent(this.otpRetrieveDescContainer,a);this.otpSentMsg=c("MDOM").find(this.otpRetrieveDescContainer,"div","otp_retrieve_desc");this.otp_uri=f;this.displayOTPLink=!0;this.oneTimePasswordLink=c("MDOM").scry(this.otpButtonContainer,"a","one_time_password_link").pop();c("MDOM").listen(this.oneTimePasswordLink,"click",null,this._onSendOneTimePassword.bind(this));this._rerenderAuthStepCPDisplay()},_mayBeShowOAuthLoginAfterPwdFailure:function(a){a=a.oauth_login_elem_payload;if(!a)return;var b=a.oAuthButton;a=a.oAuthDesc;if(!b)return;this.oauthLoginButtonContainer&&c("MDOM").setContent(this.oauthLoginButtonContainer,b);d("MCSS").show(this.oauthLoginButtonContainer);if(!a)return;this.oauthLoginDescContainer&&c("MDOM").setContent(this.oauthLoginDescContainer,a);d("MCSS").show(this.oauthLoginDescContainer)},_mayBeShowFamilyAuthLoginAfterPwdFailure:function(a){var b=this;this.igCpLogin=!0;a=a.familyAuthDesc;this.languageSelector=c("MDOM").find(this.root.ownerDocument,"div","language_selector");this.footerElem=c("MDOM").find(this.root.ownerDocument,"div","m_login_footer");this.root&&this.root.parentNode&&this.root.parentNode.parentNode&&(c("MDOM").setContent(this.root,a),d("MCSS").hide(this.languageSelector),d("MCSS").hide(this.footerElem));var e=c("MDOM").find(this.root,"button","family_auth_login_button");if(!a)return;d("MEvent").listen(e,"click",function(a){a.preventDefault(),b._sendLoginRequest()})},_isCredentialsManagerEnabled:function(){return Boolean(this.isCredsManagerEnabled&&this._isCredentialsSavingEnabled())},_isCredentialsSavingEnabled:function(){return Boolean(this.isCredsSavingEnabled&&window.PasswordCredential&&navigator.credentials&&navigator.credentials.get&&navigator.credentials.store)},_onLoginResponse:function(a){this.passwordInputDOM.setAttribute("name","pass");d("MButton").setEnabled(this.loginButton,!0);this.isTwoStepsLogin&&d("MButton").setEnabled(this.nextButton,!0);this.loginButtonAlt!==null&&d("MButton").setEnabled(this.loginButtonAlt,!0);if(!a.payload)return;var b=a.payload;this.isSmartLock.setAttribute("value",!1);b.m_login_password.error?this.numPasswordErrorAttempts++:this.numPasswordErrorAttempts=0;b.m_login_email.unrecognized&&this.unrecognizedContactpointErrorCount++;b.m_login_notice&&(c("MDOM").setContent(this.notice,b.m_login_notice),b.m_login_password.error&&this.passwordInputDOM.value.trim()===""&&this._showBlankPWError(a.payload),d("MCSS").show(this.notice));if(this.emailInput!==null){b.m_login_email.error?(d("MLoginFormError").set(this.emailInput,"error"),d("MDataStore").set(this.emailInput,"error",!0),this.isTwoStepsLogin&&(this.shouldDisplayOTPMsg=!1,this._rerenderAuthStepCPDisplay())):(d("MLoginFormError").unset(this.emailInput),d("MDataStore").set(this.emailInput,"error",!1));var e=b.m_login_email.value;e?(this.emailInput.value=e,this.isTwoStepsLogin&&this.cpText&&c("MDOM").setContent(this.cpText,e)):this.emailInput.value=""}if(this.passwordInput!==null){e=b.family_auth_login_elem_payload;e===null&&(c("MDOM").find(this.passwordInput,"input").value="");c("Stratcom").invoke("m:passwordinput:autoclear","password-plain-text-toggle-input");b.m_login_password.error?(d("MDataStore").set(this.passwordInput,"error",!0),d("MCSS").addClass(this.passwordInput,k),this.isTwoStepsLogin&&d("MDataStore").get(this.loginForm,"step","")===l&&c("MHistory").pushSoftState(n),this.isTwoStepsLogin&&this._populateProfileInfo(this._rerenderAuthStepCPDisplay.bind(this)),this._mayBeShowTwoStepsLoginAfterPwdFailure(b),this._mayBeShowOAuthLoginAfterPwdFailure(b)):(d("MDataStore").set(this.passwordInput,"error",!1),d("MCSS").removeClass(this.passwordInput,k));e!==null&&this._mayBeShowFamilyAuthLoginAfterPwdFailure(e)}this._autoFocusIfNeeded(a.payload);this.upsell!==null&&c("MDOM").hide(this.upsell);c("Stratcom").invoke("m:kaios:spatialnav:refresh",null,null)},_onLoginFromRegResponse:function(a){c("goURI")(this.regURI)},redirect:function(a){var b=this;if(!this._isCredentialsManagerEnabled())window.location.replace(a);else{var d=c("bx").getURL(c("bx")("875231"));d=new window.PasswordCredential({id:this.emailInput.value,password:this.passwordInputDOM.value,iconURL:d});try{var e=!1,f=0;navigator.credentials&&navigator.credentials.store(d).then(function(){b._logAction("creds_manager_finished"),e=!0})["catch"](function(a){b._logAction("creds_manager_error"),c("FBLogger")("creds_manager").catching(a).warn("creds_manager_error"),e=!0});if(this.shouldWaitForPasswordSave)var g=window.setInterval(function(){f>5?(window.clearInterval(g),e||b._logAction("creds_manager_incomplete"),window.location.replace(a)):f++},500);else window.location.replace(a)}catch(b){this._logAction("creds_manager_exception"),c("FBLogger")("creds_manager").catching(b).warn("creds_manager_exception"),window.location.replace(a)}}},_logDuoLikePasswordlessLoginScreenImpression:function(){var a=new(j||(j=c("URI")))(new j(this.loginForm.action).getQueryData().next),b=a.getQueryData().logger_id;a=a.getQueryData().cbt;d("PlatformOAuthDialogLoginFunnelLogger").log("client_duo_like_passwordless_login_screen_impression",a,b,!0,null,!0)},_toggleNotificationButtonState:function(){this.emailInput.value.length>0?(this.notificationScreenLoginButton.disabled=!1,this.passwordScreenNotificationButton.disabled=!1):(this.notificationScreenLoginButton.disabled=!0,this.passwordScreenNotificationButton.disabled=!0)},_collectClientSignals:function(){try{return this._collectClientSignalsImpl()}catch(a){c("FBLogger")("login").catching(a).warn("error during signal collection");return null}},_collectClientSignalsImpl:function(){var a=document.getElementById("scetoggle");if(a===null)return null;a="bi_wvdp";var b=document.getElementById(a);b!==null&&b.remove();b=document.createElement("iframe");b.style.display="none";b.srcdoc="";c("MViewport").appendNode(b);var d=this._collectClientSignalsFromContentWindow(window);if(Object.getOwnPropertyDescriptors!==void 0){var e=Object.getOwnPropertyDescriptors(HTMLIFrameElement.prototype);d.iframeProto=e.contentWindow.get.toString()}else d.iframeProto="";d.remap=b.contentWindow===window;d.iframeData=this._collectClientSignalsFromContentWindow(b.contentWindow);return c("MDOM").create("input",{type:"hidden",name:a,id:a,value:JSON.stringify(d)})},_collectClientSignalsFromContentWindow:function(a){var b={};try{var d=a.navigator,e=a.chrome;b.hwc=e!==void 0;e!==void 0&&(b.hwcr=e.runtime!==void 0);b.has_dnt=d.doNotTrack!==void 0;b.has_standalone=d.standalone!==void 0;b.standalone=d.standalone;b.wnd_toStr_toStr=a.toString.toString();e=d.permissions;b.hasPerm=d.permissions!==void 0;e!==void 0&&(b.permission_query_toString=e.query.toString(),b.permission_query_toString_toString=e.query.toString.toString());try{b.has_seWo=d.serviceWorker!==void 0,b.has_meDe=d.mediaDevices!==void 0,b.has_creds=d.credentials!==void 0,b.has_hwi_bt=a.com_huawei_browser_translate_obj!==void 0,b.has_agjsi=a.AppsgeyserJSInterface!==void 0}catch(a){c("FBLogger")("login").catching(a).warn("Error checking additional props")}}catch(a){c("FBLogger")("login").catching(a).warn("When collecting signals in content window")}return b}};a=r;g["default"]=a}),98);
__d("MLoginView",["cx","DeferredCookie","MButton","MCSS","MDOM","Stratcom","ge"],(function(a,b,c,d,e,f,g,h){function a(a,b){d("MDOM").listen(a,"submit",null,function(){c("DeferredCookie").flushAllCookiesWithoutRecordingConsentDONOTCALLBEFORECONSENT(),d("MButton").setEnabled(b,!1),window.setTimeout(d("MButton").setEnabled.bind(null,b,!0),15e3)})}function b(a){window.location.replace(a)}function e(a,b,e){d("MDOM").listen(a,"click",null,function(e){d("MDOM").remove(a);c("MCSS").removeClass(b,"_7tb");e=d("MDOM").scry(c("ge")("root"),"div","m_login_form_title");if(e.length>0){e=e[0];e instanceof HTMLElement&&d("MDOM").remove(e)}window.setTimeout(function(){c("Stratcom").invoke("m:kaios:spatialnav:refresh",null,null),i()},150)})}function i(){var a=c("ge")("m_login_email");a=a?d("MDOM").find(a,"input"):null;a instanceof HTMLElement&&a.focus()}g.disableOnSubmit=a;g.appSwitch=b;g.showForm=e;g.snapFocusToUsernameTextField=i}),98);
__d("XOauthDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/dialog/oauth/",{display:{type:"Enum",enumType:1},auth_type:{type:"String"},logger_id:{type:"String"},redirect_uri:{type:"String"},sso_device:{type:"Enum",enumType:1},sdk:{type:"String"},ref:{type:"String"},ret:{type:"String"},scope:{type:"StringVector"},app_id:{type:"Int"},auth_method:{type:"Enum",enumType:1},facebook_sdk_version:{type:"String"},calling_package_key:{type:"String"},context_uri:{type:"String"},default_audience:{type:"Enum",enumType:1},domain:{type:"String"},encoded_state:{type:"String"},fallback_redirect_uri:{type:"String"},force_confirmation:{type:"Bool",defaultValue:!1},kid_directed_site:{type:"Bool",defaultValue:!1},install_nonce:{type:"String"},legacy_override:{type:"String"},loyalty_program_id:{type:"Int"},shop_id:{type:"Int"},native_login_button:{type:"Bool",defaultValue:!1},original_redirect_uri:{type:"String"},privacyx:{type:"String"},return_format:{type:"EnumVector",enumType:{member:1}},return_scopes:{type:"Bool",defaultValue:!1},scope_objects:{type:"String"},scope_objects_count:{type:"String"},sdk_version:{type:"String"},seen_scopes:{type:"String"},sheet_name:{type:"String"},singular_selected_asset_id:{type:"Int"},state:{type:"String"},user_mobile_phone:{type:"String"},android_key:{type:"String"},sso:{type:"String"},sso_key:{type:"String"},nonce:{type:"String"},user_code:{type:"String"},auth_nonce:{type:"String"},fbs:{type:"Int"},fbapp_pres:{type:"Bool",defaultValue:!1},is_comet_compat:{type:"Bool",defaultValue:!1},response_type:{type:"String"},ignore_reentry:{type:"Bool",defaultValue:!1},type:{type:"Enum",enumType:1},cbt:{type:"Int"},ies:{type:"Bool",defaultValue:!1},cct_over_app_switch:{type:"Bool",defaultValue:!1},cct_prefetching:{type:"Bool",defaultValue:!1},messenger_page_id:{type:"Int"},reset_messenger_state:{type:"Bool",defaultValue:!1},extras:{type:"String"},add_email_reauth_nonce:{type:"String"},tp:{type:"Enum",enumType:1},encrypted_query_string:{type:"String"},account_type:{type:"Enum",enumType:0},is_promote_auth:{type:"Bool",defaultValue:!1},window_width:{type:"Int"},window_height:{type:"Int"},code_challenge:{type:"String"},code_challenge_method:{type:"Enum",enumType:1},config_id:{type:"String"},token_type:{type:"Enum",enumType:1},steps:{type:"EnumVector",enumType:{member:1}},dialog_source:{type:"String"},cui_gk:{type:"String"},gdp_cookie_result:{type:"String"},is_limited_login_shim:{type:"Bool",defaultValue:!1},user_token_nonce:{type:"String"},loyalty_ad_id:{type:"String"},loyalty_referrer:{type:"Enum",enumType:1},privacy_mutation_token:{type:"String"}})}),null);
__d("PlatformDialogCBTSetter",["PlatformOAuthDialogLoginFunnelLogger","URI","XOauthDialogController","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,e){if(a.value===""){var f=Date.now();a.value=f.toString()}d("PlatformOAuthDialogLoginFunnelLogger").log(b,a.value,c,!0,e)}function b(a,b,e){var f=new(h||(h=c("URI")))(a.action),g=f.getQueryData().next;if(!g)return;g=new h(g);var i=c("XOauthDialogController").getURIBuilder().getURI().getPath().toString();i.endsWith("/")&&(i=i.substr(0,i.length-1));if(!g.getPath().includes(i))return;i=g.getQueryData().cbt;var j=g.getQueryData().logger_id;i||(i=Date.now(),g.addQueryData("cbt",i),f.addQueryData("next",g.toString()),a.action=f.toString());j||(j=c("uuidv4")(),g.addQueryData("logger_id",j),f.addQueryData("next",g.toString()),a.action=f.toString());d("PlatformOAuthDialogLoginFunnelLogger").log(b,i,j,!0,null,e)}g.setCBTInFieldAndLog=a;g.setCBTInFormAndLog=b}),98);