;/*FB_PKG_DELIM*/

__d("PageletEventsHelper",["Arbiter","PageletEventConstsJS"],(function(a,b,c,d,e,f,g){var h="BigPipe/init",i="MRenderingScheduler/init",j="pagelet_event",k="phase_begin",l={},m=[],n=!1;function o(){return{pagelets:{},categories:{},phase_start:{},display_resources:{},all_resources:{}}}function p(a,b,c,d){l[d]==void 0&&(l[d]=o()),l[d].pagelets[b]==void 0&&(l[d].pagelets[b]={}),l[d].pagelets[b][a]=c}function q(a){a.subscribe(j,function(a,b){var d=b.event,e=b.ts;a=b.id;var f=b.lid,g=b.phase,h=b.categories,i=b.allResources;b=b.displayResources;p(d,a,e,f);var j=l[f],k=j.pagelets[a];d===c("PageletEventConstsJS").ARRIVE_END&&(k.phase=g,j.all_resources[a]=i,j.display_resources[a]=b);(d===c("PageletEventConstsJS").ONLOAD_END||d===c("PageletEventConstsJS").DISPLAY_END)&&h&&h.forEach(function(a){j.categories[a]==void 0&&(j.categories[a]={}),j.categories[a][d]=e});for(k=0,g=m.length;k<g;k++)m[k](a,d,e,f)}),a.subscribe(k,function(a,b){l[b.lid].phase_start[b.phase]=b.ts})}function a(){if(n)return;c("Arbiter").subscribe(h,function(a,b){a=b.lid;b=b.arbiter;l[a]=o();q(b)});c("Arbiter").subscribe(i,function(a,b){a=b.lid;b=b.arbiter;l[a]=o();q(b)});n=!0}function b(a){return l[a]?JSON.parse(JSON.stringify(l[a])):null}function d(a){m.push(a);return{remove:function(){m.splice(m.indexOf(a),1)}}}g.init=a;g.getMetrics=b;g.subscribeToPageletEvents=d}),98);
__d("MobileBigPipeStratcomProxy",["PageletEventConstsJS","PageletEventsHelper","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";function a(){d("PageletEventsHelper").init(),d("PageletEventsHelper").subscribeToPageletEvents(h)}function h(a,b,d,e){b===c("PageletEventConstsJS").DISPLAY_END&&c("Stratcom").invoke("m:schedulable:loaded",null,{name:a,lid:e})}g.init=a;g._onPageletEvent=h}),98);
__d("MCoreDeferred",["MPageControllerImpl","MPageFetcherImpl"],(function(a,b,c,d,e,f){b("MPageControllerImpl"),b("MPageFetcherImpl")}),null);
__d("MFullPageLoadState",["NavigationMetrics","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";var h="pre-tti",i=c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,a);c("Stratcom").listen("m:page:loading",null,function(){h==="pre-tti"?h="interrupted-pre-tti":h==="post-tti"?h="interrupted-post-tti":h==="post-dd"&&(h="interrupted-post-dd"),i&&i.remove(),i=null,c("Stratcom").removeCurrentListener()});function a(a,b){if(a!==c("NavigationMetrics").getFullPageLoadLid())return;b.event==="tti"&&h==="pre-tti"?h="post-tti":b.event==="all_pagelets_displayed"&&(h==="pre-tti"||h==="post-tti")?h="post-dd":b.event==="e2e"&&h!=="post-e2e"&&(h="post-e2e",i&&i.remove(),i=null)}function b(){return h}g.get=b}),98);
__d("NavigationMetricsCore",["mixInEventEmitter","pageID"],(function(a,b,c,d,e,f,g){var h={NAVIGATION_DONE:"NAVIGATION_DONE",EVENT_OCCURRED:"EVENT_OCCURRED"},i={tti:"tti",e2e:"e2e",all_pagelets_loaded:"all_pagelets_loaded",all_pagelets_displayed:"all_pagelets_displayed"},j=0,k={},l=function(){function a(){this.eventTimings={tti:null,e2e:null,all_pagelets_loaded:null,all_pagelets_displayed:null},this.lid=c("pageID")+":"+j++,this.extras={}}var b=a.prototype;b.getLID=function(){return this.lid};b.setRequestStart=function(a){this.start=a;return this};b.setTTI=function(a){this.eventTimings.tti=a;this.$1(i.tti,a);return this};b.setE2E=function(a){this.eventTimings.e2e=a;this.$1(i.e2e,a);return this};b.setExtra=function(a,b){this.extras[a]=b;return this};b.setDisplayDone=function(a){this.eventTimings.all_pagelets_displayed=a;this.setExtra("all_pagelets_displayed",a);this.$1(i.all_pagelets_displayed,a);return this};b.setAllPageletsLoaded=function(a){this.eventTimings.all_pagelets_loaded=a;this.setExtra("all_pagelets_loaded",a);this.$1(i.all_pagelets_loaded,a);return this};b.setServerLID=function(a){this.serverLID=a;return this};b.$1=function(a,b){var c={};k!=null&&this.serverLID!=null&&k[this.serverLID]!=null&&(c=k[this.serverLID]);c=babelHelpers["extends"]({},c,{event:a,timestamp:b});m.emitAndHold(h.EVENT_OCCURRED,this.serverLID,c);return this};b.doneNavigation=function(){var a=babelHelpers["extends"]({start:this.start,extras:this.extras},this.eventTimings);if(this.serverLID&&k[this.serverLID]){var b=this.serverLID;Object.assign(a,k[b]);delete k[b]}m.emitAndHold(h.NAVIGATION_DONE,this.lid,a)};return a}(),m={Events:h,postPagelet:function(a,b,c){},siteInit:function(a){a(l)},setPage:function(a){if(!a.serverLID)return;k[a.serverLID]={page:a.page,pageType:a.page_type,pageURI:a.page_uri,serverLID:a.serverLID}},getFullPageLoadLid:function(){throw new Error("getFullPageLoadLid is not implemented on this site")}};c("mixInEventEmitter")(m,h);a=m;g["default"]=a}),98);
__d("NavigationMetricsMobile",["Arbiter","NavigationMetricsCore","PageEvents","Stratcom","performance","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){var h,i,j={},k="";(a=c("NavigationMetricsCore")).getFullPageLoadLid=function(){return k};a.postPagelet=function(a,b,d){j[d]||(j[d]=(h||(h=c("performanceAbsoluteNow")))())};a.siteInit(function(a){var b=new a();b.setRequestStart((i||(i=c("performance"))).timing&&(i||(i=c("performance"))).timing.navigationStart);function d(a,d,e,f){c("Arbiter").subscribe(a,function(a,g){k===""&&(k=g.lid);b.setServerLID(g.lid);function a(){g.arbiter.subscribe(d,function(a,d){a=d.lid;d=d.ts;b.setTTI(d);c("NavigationMetricsCore").emitAndHold(c("NavigationMetricsCore").Events.EVENT_OCCURRED,a,{event:"tti",timestamp:d})}),g.arbiter.subscribe(e,function(a,c){a=c.ts;b.setDisplayDone(a)}),c("Arbiter").subscribe(f,function(a,c){a=c.ts;b.eventTimings.tti||b.setTTI(j[g.lid]);b.setE2E(a).doneNavigation();delete j[g.lid]})}window._splashBody!==void 0&&window._splashBody!==null?c("Arbiter").subscribe("splash-screen-removed",a):a()})}d("BigPipe/init","tti_bigpipe","all_pagelets_displayed",c("PageEvents").BIGPIPE_ONLOAD);d("MRenderingScheduler/init","MRenderingScheduler/tti","MRenderingScheduler/dd","MRenderingScheduler/e2e");c("Stratcom").listen("m:page:loading",null,function(){b=new a(),b.setRequestStart((h||(h=c("performanceAbsoluteNow")))())})});g["default"]=a}),99);
__d("MAsyncNavigationTrackerTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setEventSpecificDetails=function(a){this.$1.event_specific_details=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setNavigationID=function(a){this.$1.navigation_id=a;return this};c.setPath=function(a){this.$1.path=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setSourcePath=function(a){this.$1.source_path=a;return this};c.setSourceTopView=function(a){this.$1.source_top_view=a;return this};c.setTimeSinceNavStart=function(a){this.$1.time_since_nav_start=a;return this};c.setTimeSinceSessionStart=function(a){this.$1.time_since_session_start=a;return this};return a}();c={event_name:!0,event_specific_details:!0,navigation_id:!0,path:!0,session_id:!0,source_path:!0,source_top_view:!0,time_since_nav_start:!0,time_since_session_start:!0};f["default"]=a}),66);
__d("MPageNavigationTracking",["EventListener","JavelinHistory","MAsyncNavigationTrackerTypedLogger","MFullPageLoadState","Stratcom","URI","performanceAbsoluteNow","performanceNavigationStart","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("uuidv4")(),k=0,l=null;function a(){var a;(a=c("Stratcom")).listen("m:page:load-start",null,n);a.listen("m:page:render:complete",null,r);a.listen("m:history:change",null,o);a.listen("m:page:error",null,q);a.listen(["go","gouri"],null,u);c("EventListener").listen(window,"blur",s);c("EventListener").listen(window,"beforeunload",t)}function m(){l=null}function n(a){a=a.getData();var b=a.targetPath,e=a.previousPath,f=a.previousTopView,g=a.prefetchState;g=g===void 0?null:g;var i=a.cacheType;i=i===void 0?null:i;a=a.isFromHistory;a=a===void 0?!1:a;b=w(b);e=w(e);f=f;if(b==null)return;p(b,a);var j=++k;l={id:j,path:b,sourcePath:e,sourceTopView:f,startTimeAbsolute:(h||(h=c("performanceAbsoluteNow")))(),prefetchState:g,cacheType:i,navigationType:a?"history":null};v("page_load_start",!1,{fullPageLoadState:d("MFullPageLoadState").get()})}function o(a){var b=w(a.getData().path);if(l&&l.path!==b){a=a.getData().trigger===c("JavelinHistory").TRIGGERS.POPSTATE;p(b,a)}}function p(a,b){if(!l)return;v("page_load_abandoned",!1,{abandonedToPath:a,isFromBackPress:b.toString()});m()}function q(a){if(!l)return;a=a.getData();v("page_load_failed",!1,{errorCode:(a==null?"":a).toString()});m()}function r(a){a=a.getData();a=a.path;a=w(a);if(a==null||l==null||l.path!=a)return;v("page_render_complete");m()}function s(){if(!l)return;v("browser_moved_to_background",!0);m()}function t(){v("session_unload",!0)}function u(a){a=a.getData();a=a.uri;v("session_navigate_away",!0,{uri:a});m()}function v(a,b,d){b===void 0&&(b=!1);if(l==null)return;d=d||{};d.cacheType=l.cacheType;d.navigationType=l.navigationType;d.prefetchState=l.prefetchState;var e=(h||(h=c("performanceAbsoluteNow")))();a=new(c("MAsyncNavigationTrackerTypedLogger"))().setSessionID(j).setNavigationID(l.id.toString()).setPath(l.path).setSourcePath(l.sourcePath).setSourceTopView(l.sourceTopView).setEventName(a).setTimeSinceNavStart(e-l.startTimeAbsolute).setEventSpecificDetails(d).setTimeSinceSessionStart(e-c("performanceNavigationStart")());b?a.logImmediately():a.log()}function w(a){return!a?null:new(i||(i=c("URI")))(a).getQualifiedURI().toString()}g.init=a}),98);
__d("onSyncTTI",["Arbiter","BigPipe","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("Arbiter").subscribeOnce(c("BigPipe").Events.tti,function(){c("Stratcom").invoke("m:root:render")})}g.run=a}),98);
__d("AddressBar",["MViewport","ge","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a=0;function g(){a=0;if(b("MViewport").getScrollTop()<60){var c=h()*-1;b("MViewport").scrollToHeader(c)}}function h(){var a=b("ge")("header-notices");return a?a.offsetHeight:0}function c(){navigator.userAgent.indexOf("iPad")===-1&&window.addEventListener("load",function a(){window.removeEventListener("load",a,!1),g()},!1)}f.setupLoadListener=c}),null);
__d("ViewportDimensions",["Bootloader","MViewport","isInIframe"],(function(a,b,c,d,e,f,g){"use strict";var h={_initialized:!1,_innerWidth:0,_innerHeight:0,_outerWidth:0,_outerHeight:0,_wasCookieSet:!1,init:function(){!h._initialized&&!c("isInIframe")()&&!d("MViewport").isLandscape()&&(h._initialized=!0,h._innerWidth=window.innerWidth,h._innerHeight=window.innerHeight,h._outerWidth=window.outerWidth,h._outerHeight=window.outerHeight)},setCookie:function(a){if(h._wasCookieSet){a&&a();return}c("Bootloader").loadModules(["Cookie"],function(b){if(!h._initialized)return;h._wasCookieSet||(h._wasCookieSet=!0,b.set("vpd",[h.getScreenDimension(h._innerHeight,h._outerHeight,screen.height,.87),h.getScreenDimension(h._innerWidth,h._outerWidth,screen.width,1),window.devicePixelRatio].join("x")));a&&a()},"ViewportDimensions")},getScreenDimension:function(a,b,c,d){var e=0;b===0?e=a:a===0?e=b:e=Math.min(a,b);a=Math.max(1,window.devicePixelRatio);return Math.floor(a*(e===0?Math.floor(c*d):e))}};a=h;g["default"]=a}),98);
__d("MHome",["FBLogger","MHistory","MURI","Stratcom"],(function(a,b,c,d,e,f,g){function a(){c("Stratcom").listen("m:page:unload",null,function(a){c("Stratcom").invoke("m:homepage:unload"),c("Stratcom").removeCurrentListener()}),c("Stratcom").invoke("m:homepage:load")}var h="/home.php";d="/home.php?layoutonly";function b(a){a=a;a||(a=c("MHistory").getPath());if(!a)return!1;try{var b=new(c("MURI"))(a).normalize();b=b.getPath()}catch(d){b=null,c("FBLogger")("mweb").catching(d).warn("Unable to determine if isHome, invalid path: %s",a.toString())}return b!=null&&(b==="/"||b===h)&&!c("MHistory").hasSoftState()}g.init=a;g.HOME_PATH=h;g.HOME_LAYOUT_PATH=d;g.isHome=b}),98);
__d("BanzaiConsts",[],(function(a,b,c,d,e,f){a={SEND:"Banzai:SEND",OK:"Banzai:OK",ERROR:"Banzai:ERROR",SHUTDOWN:"Banzai:SHUTDOWN",BASIC:"basic",VITAL:"vital",BASIC_WAIT:6e4,BASIC_WAIT_COMET:2e3,VITAL_WAIT:1e3,BATCH_SIZE_LIMIT:64e3,EXPIRY:864e5,BATCH_TIMEOUT:1e4,LAST_STORAGE_FLUSH:"banzai:last_storage_flush",STORAGE_FLUSH_INTERVAL:12*60*6e4,POST_READY:0,POST_INFLIGHT:1,POST_SENT:2};b=a;f["default"]=b}),66);
__d("BanzaiUtils",["BanzaiConsts","CurrentUser","FBLogger","WebSession","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";var g,h,i={canSend:function(a){return a[2]>=(g||(g=b("performanceAbsoluteNow")))()-(h||(h=b("BanzaiConsts"))).EXPIRY},filterPost:function(a,c,d,e){if(e.overlimit)return!0;if(!e.sendMinimumOnePost&&a[4]+e.currentSize>(h||(h=b("BanzaiConsts"))).BATCH_SIZE_LIMIT)return!0;var f=a.__meta;if(f.status!=null&&f.status>=(h||(h=b("BanzaiConsts"))).POST_SENT||!i.canSend(a))return!1;if(f.status!=null&&f.status>=(h||(h=b("BanzaiConsts"))).POST_INFLIGHT)return!0;var g=f.compress!=null?f.compress:!0,j=(f.webSessionId!=null?f.webSessionId:"null")+(f.userID!=null?f.userID:"null")+(f.appID!=null?f.appID:"null")+(g?"compress":""),k=e.wadMap.get(j);k||(k={app_id:f.appID,needs_compression:g,posts:[],user:f.userID,webSessionId:f.webSessionId},e.wadMap.set(j,k),c.push(k));f.status=(h||(h=b("BanzaiConsts"))).POST_INFLIGHT;Array.isArray(k.posts)?k.posts.push(a):b("FBLogger")("banzai").mustfix("Posts were a string instead of array");d.push(a);e.currentSize+=a[4];e.currentSize>=(h||(h=b("BanzaiConsts"))).BATCH_SIZE_LIMIT&&(e.overlimit=!0);return e.keepRetryable&&Boolean(f.retry)},resetPostStatus:function(a){a.__meta.status=(h||(h=b("BanzaiConsts"))).POST_READY},retryPost:function(a,c,d){var e=a;e.__meta.status=(h||(h=b("BanzaiConsts"))).POST_READY;e[3]=(e[3]||0)+1;e.__meta.retry!==!0&&c>=400&&c<600&&d.push(a)},wrapData:function(a,c,d,e,f){d=[a,c,d,0,(a=f)!=null?a:c?JSON.stringify(c).length:0];d.__meta={appID:b("CurrentUser").getAppID(),retry:e===!0,status:(h||(h=b("BanzaiConsts"))).POST_READY,userID:b("CurrentUser").getPossiblyNonFacebookUserID(),webSessionId:b("WebSession").getId()};return d}};e.exports=i}),null);
__d("SetIdleTimeoutAcrossTransitions",["NavigationMetrics","cancelIdleCallback","clearTimeout","nullthrows","requestIdleCallbackAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i=new Map();function b(a,b){if(h){var d=c("setTimeoutAcrossTransitions")(function(){var b=c("requestIdleCallbackAcrossTransitions")(function(){a(),i["delete"](b)});i.set(d,b)},b);return d}else return c("setTimeoutAcrossTransitions")(a,b)}function d(a){c("clearTimeout")(a),i.has(a)&&(c("cancelIdleCallback")(c("nullthrows")(i.get(a))),i["delete"](a))}c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,function(b,c){c.event==="all_pagelets_loaded"&&(h=!!a.requestIdleCallback)});g.start=b;g.clear=d}),98);
__d("BanzaiStorage",["BanzaiConsts","BanzaiUtils","CurrentUser","SetIdleTimeoutAcrossTransitions","WebSession","WebStorage","WebStorageMutex","cr:8958","isInIframe","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";var g,h,i,j="bz:",k=b("isInIframe")(),l,m=!1,n=null;function o(){var a="check_quota";try{var b=p();if(!b)return!1;b.setItem(a,a);b.removeItem(a);return!0}catch(a){return!1}}function p(){m||(m=!0,l=(g||(g=b("WebStorage"))).getLocalStorage());return l}a={flush:function(a){if(k)return;var c=p();if(c){n==null&&(n=parseInt(c.getItem((h||(h=b("BanzaiConsts"))).LAST_STORAGE_FLUSH),10));var d=n&&(i||(i=b("performanceAbsoluteNow")))()-n>=(h||(h=b("BanzaiConsts"))).STORAGE_FLUSH_INTERVAL;d&&a();(d||!n)&&(n=(i||(i=b("performanceAbsoluteNow")))(),(g||(g=b("WebStorage"))).setItemGuarded(c,(h||(h=b("BanzaiConsts"))).LAST_STORAGE_FLUSH,n.toString()))}},restore:function(a){if(k)return;var c=p();if(!c)return;var d=function(d){var e=[];for(var f=0;f<c.length;f++){var g=c.key(f);typeof g==="string"&&g.indexOf(j)===0&&g.indexOf("bz:__")!==0&&e.push(g)}e.forEach(function(d){var e=c.getItem(d);c.removeItem(d);if(e==null||e==="")return;d=b("cr:8958").parse(e);d.forEach(function(c){if(!c)return;var d=c.__meta=c.pop(),e=b("BanzaiUtils").canSend(c);if(!e)return;e=b("CurrentUser").getPossiblyNonFacebookUserID();(d.userID===e||e==="0")&&(b("BanzaiUtils").resetPostStatus(c),a(c))})});d&&d.unlock()};o()?new(b("WebStorageMutex"))("banzai").lock(d):b("SetIdleTimeoutAcrossTransitions").start(d,0)},store:function(a){if(k)return;var c=p(),d=a.filter(function(a){return a.__meta.status!==(h||(h=b("BanzaiConsts"))).POST_SENT});if(!c||d.length<=0)return;d=d.map(function(a){return[a[0],a[1],a[2],a[3]||0,a[4],a.__meta]});a.splice(0,a.length);(g||(g=b("WebStorage"))).setItemGuarded(c,j+b("WebSession").getId()+"."+(i||(i=b("performanceAbsoluteNow")))(),b("cr:8958").stringify(d))}};e.exports=a}),null);
__d("QueryString",[],(function(a,b,c,d,e,f){function g(a){var b=[];Object.keys(a).sort().forEach(function(c){var d=a[c];if(d===void 0)return;if(d===null){b.push(c);return}b.push(encodeURIComponent(c)+"="+encodeURIComponent(String(d)))});return b.join("&")}function a(a,b){b===void 0&&(b=!1);var c={};if(a==="")return c;a=a.split("&");for(var d=0;d<a.length;d++){var e=a[d].split("=",2),f=decodeURIComponent(e[0]);if(b&&Object.prototype.hasOwnProperty.call(c,f))throw new URIError("Duplicate key: "+f);c[f]=e.length===2?decodeURIComponent(e[1]):null}return c}function b(a,b){return a+(a.indexOf("?")!==-1?"&":"?")+(typeof b==="string"?b:g(b))}c={encode:g,decode:a,appendToUrl:b};f["default"]=c}),66);
__d("BanzaiAdapterMobile",["invariant","BanzaiConsts","BanzaiStorage","CurrentUser","DTSGUtils","LSD","MBanzaiConfig","MDTSG","MRequest","MRequestConfig","QueryString","Run","SprinkleConfig","Stratcom","TimeSlice","Visibility","ZeroCategoryHeader","isInIframe","lowerFacebookDomain"],(function(a,b,c,d,e,f,g,h){var i,j="/a/bz",k=c("isInIframe")(),l=[];function m(a){if(!a)return{};a=d("MDTSG").getCachedToken();var b={fb_dtsg:a,__a:c("MRequestConfig").ajaxResponseToken.encrypted,__user:c("CurrentUser").getID(),__fbbk:"1"};c("LSD").token&&(b.lsd=c("LSD").token);c("SprinkleConfig").param_name&&(a?b[c("SprinkleConfig").param_name]=d("DTSGUtils").getNumericValue(a):c("LSD").token&&(b[c("SprinkleConfig").param_name]=d("DTSGUtils").getNumericValue(c("LSD").token)));return b}var n={config:c("MBanzaiConfig"),useBeacon:Boolean(c("MBanzaiConfig").gks&&c("MBanzaiConfig").gks.mtouch_use_beacon),inform:function(a){c("Stratcom").invoke(a)},subscribe:function(a,b){return c("Stratcom").listen(a,null,b)},wrapInTimeSlice:function(a,b){return c("TimeSlice").guard(function(){a()},b,{propagationType:c("TimeSlice").PropagationType.ORPHAN})},cleanup:function(){var a=l;l=[];a.forEach(function(a){a.abort()})},send:function(a,b,d,e){var f=n.getEndPointUrl(!1),g=new(c("MRequest"))(f);g.setAutoProcess(!1);g.setRawData(a);g.setRequestHeader("X_FB_BACKGROUND_STATE",1);b&&g.listen("done",b);e||g.listen("done",function(a){n.inform((i||(i=c("BanzaiConsts"))).OK)});g.listen("error",function(a){a.isHandled=!0;a=g.getTransport().status;d&&d(a);e||n.inform((i||(i=c("BanzaiConsts"))).ERROR)});c("MRequestConfig").cleanFinishedRequest&&g.listen("finally",function(){var a=l.indexOf(g);a>=0&&l.splice(a,1)});l.push(g);g.send()},preferredCompressionMethod:function(){return"snappy_base64"},readyToSend:function(){return navigator.onLine},setHooks:function(a){c("Visibility").addListener("hidden",a._store),c("Visibility").addListener("visible",a._restore),window.addEventListener("pagehide",a._store),window.addEventListener("pageshow",a._restore),window.addEventListener("blur",a._store),window.addEventListener("focus",a._restore)},setUnloadHook:function(a){d("Run").onUnload(a._unload)},onUnload:function(a){d("Run").onUnload(a)},getEndPointUrl:function(a){a=m(a);a=c("QueryString").appendToUrl(j,a);a.length<=2e3||h(0,21850,a);return a},getStorage:function(){return c("BanzaiStorage")},getTopLevel:function(){return k&&c("lowerFacebookDomain").isValidDocumentDomain()?window.top:null},isOkToSendViaBeacon:function(){return Boolean(!c("ZeroCategoryHeader").value&&d("MDTSG").getCachedToken())}};a=n;g["default"]=a}),98);
__d("DataAttributeUtils",["cr:6669"],(function(a,b,c,d,e,f){var g=[];function h(a,b){a=a;while(a){if(b(a))return a;a=a.parentNode}return null}function i(a,b){a=h(a,function(a){return a instanceof Element&&!!a.getAttribute(b)});return a instanceof Element?a:null}var j={LEGACY_CLICK_TRACKING_ATTRIBUTE:"data-ft",CLICK_TRACKING_DATASTORE_KEY:"data-ft",ENABLE_STORE_CLICK_TRACKING:"data-fte",IMPRESSION_TRACKING_CONFIG_ATTRIBUTE:"data-xt-vimp",IMPRESSION_TRACKING_CONFIG_DATASTORE_KEY:"data-xt-vimp",REMOVE_LEGACY_TRACKING:"data-ftr",getDataAttribute:function(a,b){return k[b]?k[b](a):a.getAttribute(b)},setDataAttribute:function(a,b,c){return l[b]?l[b](a,c):a.setAttribute(b,c)},getDataFt:function(a){if(a.getAttribute(j.ENABLE_STORE_CLICK_TRACKING)){var c=b("cr:6669").get(a,j.CLICK_TRACKING_DATASTORE_KEY);c||(c=j.moveClickTrackingToDataStore(a,a.getAttribute(j.REMOVE_LEGACY_TRACKING)));return c}return a.getAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE)},setDataFt:function(a,c){if(a.getAttribute(j.ENABLE_STORE_CLICK_TRACKING)){b("cr:6669").set(a,j.CLICK_TRACKING_DATASTORE_KEY,c);return}a.setAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE,c)},moveXTVimp:function(a){j.moveAttributeToDataStore(a,j.IMPRESSION_TRACKING_CONFIG_ATTRIBUTE,j.IMPRESSION_TRACKING_CONFIG_DATASTORE_KEY),g.push(a.id)},getXTrackableElements:function(){var a=g.map(function(a){return document.getElementById(a)}).filter(function(a){return!!a}),b=document.querySelectorAll("[data-xt-vimp]");for(var c=0;c<b.length;c++)a.push(b[c]);return a},getDataAttributeGeneric:function(a,c,d){d=b("cr:6669").get(a,d);return d!==void 0?d:a.getAttribute(c)},moveAttributeToDataStore:function(a,c,d){var e=a.getAttribute(c);e&&(b("cr:6669").set(a,d,e),a.removeAttribute(c))},moveClickTrackingToDataStore:function(a,c){var d=a.getAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE);d&&(b("cr:6669").set(a,j.CLICK_TRACKING_DATASTORE_KEY,d),c&&a.removeAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE));return d},getClickTrackingParent:function(a){a=i(a,j.LEGACY_CLICK_TRACKING_ATTRIBUTE)||i(a,j.ENABLE_STORE_CLICK_TRACKING);return a},getClickTrackingElements:function(a){return a.querySelectorAll("["+j.LEGACY_CLICK_TRACKING_ATTRIBUTE+"], ["+j.ENABLE_STORE_CLICK_TRACKING+"]")},getParentByAttributeOrDataStoreKey:function(a,c,d){while(a&&(!a.getAttribute||!a.getAttribute(c))&&b("cr:6669").get(a,d)===void 0)a=a.parentNode;return a}},k={"data-ft":j.getDataFt,"data-xt-vimp":function(a){return j.getDataAttributeGeneric(a,"data-xt-vimp","data-xt-vimp")},"data-ad":function(a){return j.getDataAttributeGeneric(a,"data-ad","data-ad")},"data-xt":function(a){return j.getDataAttributeGeneric(a,"data-xt","data-xt")}},l={"data-ft":j.setDataFt,"data-xt":function(a,c){b("cr:6669").set(a,"data-xt",c)}};e.exports=j}),null);
__d("MPopoverVisiblityTracker",["MHistory"],(function(a,b,c,d,e,f,g){"use strict";function a(){}b=function(){return c("MHistory").hasSoftState()};g.init=a;g.isPopoverOpen=b}),98);
__d("MVisibilityTrackingHelper",["MPopoverVisiblityTracker","MViewport","Stratcom","StratcomManager","gkx"],(function(a,b,c,d,e,f,g){function a(a,b){d("StratcomManager").enableDispatch(document,"scroll");return[c("Stratcom").listen("m:root:render",null,a),c("Stratcom").listen("scroll",null,a),c("Stratcom").listen("MScrollArea:scrollend",null,a)]}function b(){return{width:d("MViewport").getWidth(),height:d("MViewport").getHeight()}}function e(){var a=c("gkx")("20872");if(a&&d("MPopoverVisiblityTracker").isPopoverOpen())return!0;a=document.getElementById("MPopupControl");return!!a}g.getEventListeners=a;g.getViewportInfo=b;g.isSnippetFlyoutVisible=e}),98);
__d("MViewportTracking",["invariant","DataAttributeUtils","MDOM","MFBJSON","MHome","MPopoverVisiblityTracker","MVector","MViewport","MVisibilityTrackingHelper","NavigationMetrics","Stratcom","Style","Visibility","gkx","onAfterTTI","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";var i=97,j=200,k=new Map();a=function(){function a(){var a=this;this.$2=[];this.debugConsole=!1;this.activeStories={};this.cachedViewportHeight=0;this.discardVPVDIntervalThreshold=9e4;this.vpvdMinDuration=250;this.isLoose=!1;this.isTimeTrackingEnabled=!1;this.latestTimeTrackingTimestamp=0;this.maxScrollPosition=0;this.minSizeToBeVisible=0;this.readStoryIDs={};this.relaxedMinSize=!1;this.trackingHooks=!1;this.vpvdDebug=!1;this.vpvDebug=!1;this.enableAdsAllocationIntegrityLogging=!1;this.queueLogAction=function(){a.isLoose?a.$3||(a.$3=c("setTimeoutAcrossTransitions")(function(){a.maxScrollPosition=Math.max(a.maxScrollPosition,d("MViewport").getScrollTop()),a.startVpvTracking(),a.$3=null},100)):(window.clearTimeout(a.$1),a.$1=c("setTimeoutAcrossTransitions")(function(){a.startVpvTracking()},a.getTimeout()))}}var b=a.prototype;b.getDataFromConfig=function(a){h(0,2199)};b.getStoryID=function(a){h(0,2200)};b.getDataToLog=function(a){h(0,2201)};b.sendDataToLog=function(a){h(0,2202)};b.getTimeout=function(){h(0,2203)};b.getAllStories=function(){h(0,2204)};b.init=function(b){var e=this;this.isLoose=!!b.is_loose;this.relaxedMinSize=!!b.relaxed_min_size;this.vpvDebug=!!b.vpv_debug;this.isTimeTrackingEnabled=!1;this.vpvdMinDuration=b.vpvd_min_duration||250;var f=a.shouldRunTrackingAfterTTI();d("MPopoverVisiblityTracker").init();f||(this.cachedViewportHeight=d("MViewport").getHeight());this.getDataFromConfig(b);this.maxScrollPosition=0;this.readStoryIDs=this.getCachedReadStoryIDs()||{};this.$2=[c("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)),c("Stratcom").listen("m:viewport:update-complete",null,function(){e.cachedViewportHeight=d("MViewport").getHeight()})];b.triggerOverride?this.$2=this.$2.concat(b.triggerOverride.map(function(a){var b=a[0];a=a[1];return c("Stratcom").listen(b,a,e.queueLogAction.bind(e))})):this.$2.push(c("Stratcom").listen("scroll",null,this.queueLogAction.bind(this)));if(this.isTimeTrackingEnabled){this.$2.push((b=c("Visibility")).addListener(b.VISIBLE,function(){return e.startVpvTracking()}));this.$2.push(b.addListener(b.HIDDEN,function(){return e.stopVpvTracking()}))}this.$2.push(c("Stratcom").listen("m:newsfeed:popup-visible",null,function(){e.stopVpvTracking()}),c("Stratcom").listen("m:newsfeed:popup-hidden",null,function(){e.startVpvTracking()}));f?c("onAfterTTI")(function(){e.startVpvTracking()},!1):(this.startVpvTracking(),c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,function(a,b){a=b.event;a==="tti"&&(e.startVpvTracking(),c("NavigationMetrics").removeCurrentListener())}))};b.getFBFeedLocation=function(){return-1};b.unitTestOnlyGetListeners=function(){return[].concat(this.$2)};b.getCachedReadStoryIDs=function(){return null};b.getMinSizeToBeVisible=function(a){if(!this.relaxedMinSize)return j;a="getBoundingClientRect"in a?a.getBoundingClientRect().height:d("MVector").getDim(a).y;return Math.min(j,a*.5)};b.startVpvTracking=function(){this.isTimeTrackingEnabled?this.startRecordingTimeTrackingData():this.fireEvent()};b.stopVpvTracking=function(){this.isTimeTrackingEnabled?this.stopRecordingTimeTrackingData():this.fireEvent()};b.fireEvent=function(){if(d("MVisibilityTrackingHelper").isSnippetFlyoutVisible())return;var a=this.getAllStoriesInView();for(var b=0;b<a.length;b++){var e=a[b],f=this.getStoryID(e);if(!f||f in this.readStoryIDs)continue;this.readStoryIDs[f]=!0;this.sendDataToLog(this.getDataToLog(e));if(this.vpvDebug){f=d("MDOM").scry(e,"div")[0];f&&c("Style").set(f,"background-color","#fffbe2")}this.markStoryRead(e);this.fireStoryVisibleHandlers(e)}};b.fireStoryVisibleHandlers=function(a){(k.get(a)||[]).forEach(function(a){return a()}),k["delete"](a)};b.markStoryRead=function(a){};b.getTimetrackingDataToLog=function(b){var e=d("MDOM").scry(b.story,"*","data-is-cta").map(function(a){a=c("DataAttributeUtils").getDataFt(a);a=a&&JSON.parse(a);return a&&a.cta_types}).filter(function(a){return!!a});this.cachedViewportHeight===0&&a.shouldRunTrackingAfterTTI()&&(this.cachedViewportHeight=d("MViewport").getHeight());return{evt:i,fbfeed_location:this.getFBFeedLocation(),story_height:b.story_height,viewport_height:this.cachedViewportHeight,vpvd_start_timestamp:b.evp_ts/1e3,vpvd_time_delta:Math.round(b.vpvd||0),cta_types:e}};b.recordTimeStoryWasInView=function(a){if(this.isTimeTrackingEnabled&&a.vpvd>=this.vpvdMinDuration){var b=this.getTimetrackingDataToLog(a);if(typeof b!=="string"){a=c("DataAttributeUtils").getDataFt(a.story);a&&(b=babelHelpers["extends"]({},b,d("MFBJSON").parse(a,f.id)))}this.sendTimetrackingDataToLog(b)}};b.startRecordingTimeTrackingData=function(){this.$4(!1)};b.stopRecordingTimeTrackingData=function(){this.$4(!0)};b.$4=function(a){this.activeStories||(this.activeStories={});var b=Date.now();this.latestTimeTrackingTimestamp||(this.latestTimeTrackingTimestamp=b);var c=this.getAllStoriesInViewVpvd();this.updateVPVDurations(b);if(this.debugConsole){var d=Object.values(this.activeStories);d.length&&(console.table&&console.table(d))}d=this.updateActiveStories(c,b);this.debugConsole&&(d.length&&(console.table&&console.table(d)));this.recordVPVDurations(c,a);this.latestTimeTrackingTimestamp=a?0:b};b.updateVPVDurations=function(a){var b=a-this.latestTimeTrackingTimestamp;if(b>this.discardVPVDIntervalThreshold)return;b=a-this.latestTimeTrackingTimestamp;for(a in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,a)&&(this.activeStories[a].vpvd+=b)};b.isVisible=function(a,b){for(var c=0;c<b.length;c++)if(this.getStoryID(b[c])===a)return!0;return!1};b.recordVPVDurations=function(a,b){this.recordVPVDurationsInternal(a,b)};b.recordVPVDurationsInternal=function(a,b){for(var c in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,c)&&((b||!this.isVisible(c,a))&&(this.recordTimeStoryWasInView(this.activeStories[c]),delete this.activeStories[c]))};b.updateActiveStories=function(a,b){var c=[];for(var d=0;d<a.length;d++){var e=this.getStoryID(a[d]);if(!e)break;e in this.activeStories||(this.activeStories[e]={evp_ts:b,story:a[d],vpvd:0,story_height:a[d].offsetHeight},c.push(this.activeStories[e]));this.activeStories[e].ts=b}return c};b.getAllStoriesInView=function(a){a===void 0&&(a=!1);return this.getAllStoriesInViewInternal(a,this.isLoose)};b.getAllStoriesInViewVpvd=function(){return this.getAllStoriesInViewInternal(!1,!1)};b.getAllStoriesInViewInternal=function(a,b){a===void 0&&(a=!1);b===void 0&&(b=!0);var c=[],e=this.getAllStories(),f=d("MViewport").getScrollTop(),g=d("MViewport").getHeight(),h=g+this.maxScrollPosition-f;for(var i=0;i<e.length;i++){var j=e[i],k=this.getStoryBounds(f,j),l=k.top;k=k.bottom;if(!l&&!k)continue;var m=this.getMinSizeToBeVisible(j);if(!b&&l>g-m)break;m=!b&&l<=g-m&&k>=m||b&&l<h;a&&(k<0||l>g)&&(m=!1);m&&c.push(j)}return c};b.getStoryBounds=function(a,b){if("getBoundingClientRect"in b){var c=b.getBoundingClientRect();return{bottom:c.bottom,top:c.top}}else{c=d("MVector").getPos(b).y-a;return{top:c,bottom:c+d("MVector").getDim(b).y}}};b.cleanup=function(){this.$2.forEach(function(a){return a.remove()}),this.$2=[],k.clear()};b.onUnload=function(){this.stopVpvTracking(),this.cleanup()};b.sendTimetrackingDataToLog=function(a){this.sendDataToLog(a)};a.shouldRunTrackingAfterTTI=function(){return d("MHome").isHome(location.href)&&c("gkx")("20871")};a.addStoryVisibleHandler=function(a,b){k.set(a,[].concat(k.get(a)||[],[b]));return{remove:function(){k.set(a,(k.get(a)||[]).filter(function(a){return a!==b}))}}};return a}();g["default"]=a}),98);
__d("WebCommentVpvDurationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1842512");b=d("FalcoLoggerInternal").create("web_comment_vpv_duration",a);e=b;g["default"]=e}),98);
__d("compactArray",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];for(var c=0;c<a.length;++c){var d=a[c];d!=null&&b.push(d)}return b}f["default"]=a}),66);
__d("MCommentViewportTracking",["MDOM","MDataStore","MFBJSON","MParent","MViewportTracking","Stratcom","StratcomManager","WebCommentVpvDurationFalcoEvent","compactArray","gkx","onAfterTTI"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i={m_group_stories_container:"group",m_newsfeed_stream:"",m_news_feed_stream:"",m_story_permalink_view:"",structured_composer_async_container:"user",root:""};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.loadedReplies=function(){c("Stratcom").invoke("m:commentViewportTracking:loadedReplies")};b.loadedComments=function(){h&&h.isTimeTrackingEnabled&&h.startRecordingTimeTrackingData()};b.singleton=function(a){if(!h){a={triggerOverride:[["scroll",null],["m:commentViewportTracking:loadedReplies",null],["m:feed-ufi-flyout:comments-displayed",null],["m:ufi:live-comments:render",null],["m:ufi:live-comments:new-comment",null],["m:feed-ufi-flyout:reset",null],["m:page:render:complete",null]]};d("StratcomManager").enableDispatch(document,"scroll");h=new b();h.init(a);h.debugConsole;h.isTimeTrackingEnabled&&(c("MViewportTracking").shouldRunTrackingAfterTTI()?c("onAfterTTI")(function(){h instanceof b&&h.startRecordingTimeTrackingData()},!1):h.startRecordingTimeTrackingData());c("Stratcom").listen("m:page:unload",null,function(){h=null,c("Stratcom").removeCurrentListener()})}};b.registerFlyout=function(a,b){var c;h&&(h.debugConsole,h.streamRoot=a);i=babelHelpers["extends"]((c={},c[a.id]=b||"",c),i)};var e=b.prototype;e.getDataFromConfig=function(){this.debugConsole=c("gkx")("20869"),this.isTimeTrackingEnabled=!0,this.idle_timeout=5e3,this.min_duration_to_log=100,this.min_visible_size=200,this.relaxedMinSize=!0};e.__getRootNode=function(){this.streamRoot||(this.streamRoot=c("compactArray")(Object.keys(i).map(function(a){return document.getElementById(a)}))[0]||null);return this.streamRoot};e.__getStaticTemplateRootNode=function(){this.staticElementRoot||(this.staticElementRoot=document.getElementById("static_templates"));return this.staticElementRoot};e.getAllStories=function(){var a=this.__getRootNode();if(!a)return[];a=d("MDOM").scry(this.__getRootNode(),"div","comment-body");return this.__getStaticTemplateRootNode()?a.concat(d("MDOM").scry(this.__getStaticTemplateRootNode(),"div","comment-body")):a};e.getTimeout=function(){return this.min_duration_to_log};e.getDataToLog=function(a){return{}};e.getStoryID=function(a){var b=a.getAttribute("data-commentid");return!b?String(d("MDataStore").get(a,"token"))||null:b};e.getContainerModule=function(){var a=this.__getRootNode();return!a||!(a.id in i)?"other":i[a.id]};e.getTimetrackingDataToLog=function(a){var b=a.story,c;try{var e=d("MParent").bySigil(a.story,"story-div")||d("MParent").bySigil(a.story,"m-feed-single-story");e&&(c=d("MFBJSON").parse(e.getAttribute("data-ft"),f.id))}catch(a){}return{comment_id:this.getStoryID(b),duration_ms:Math.round(a.vpvd),container_module:this.getContainerModule(),mf_story_key:c?c.mf_story_key||c.top_level_post_id:null}};e.sendDataToLog=function(a){a.comment_id&&(this.debugConsole,c("WebCommentVpvDurationFalcoEvent").log(function(){return{json_data:JSON.stringify(a)}}))};return b}(c("MViewportTracking"));g["default"]=a}),98);
__d("MemoryUtils",[],(function(a,b,c,d,e,f){"use strict";function g(){return window.performance&&window.performance.memory}function h(){return window.navigator&&window.navigator.deviceMemory}function a(){return window.performance&&typeof window.performance.measureUserAgentSpecificMemory==="function"}function i(a){return typeof a.replace==="function"?a.replace(/\n/g," ").replace(/\s+/g," "):null}function b(){if(typeof window.gc!=="function")return!1;return typeof window.gc.toString!=="function"?!1:i(window.gc.toString())==="function gc() { [native code] }"}var j=b()?window.gc:null;function c(){var a=null;if(h()){var b=parseFloat(window.navigator.deviceMemory);isNaN(b)||(a=b*1024*1024*1024)}if(g()){j!=null&&j();b=((b=window.performance)==null?void 0:b.memory)||{};var c=b.jsHeapSizeLimit,d=b.totalJSHeapSize;b=b.usedJSHeapSize;return{usedJSHeapSize:b,jsHeapSizeLimit:c,totalJSHeapSize:d,deviceMemory:a}}return{usedJSHeapSize:null,jsHeapSizeLimit:null,totalJSHeapSize:null,deviceMemory:null}}f.isMemoryAPISupported=g;f.isMeasureMemoryOriginTrialSupported=a;f.isGarbageCollectionAPIAvailable=b;f.getCurrentMemory=c}),66);
__d("prepareURIForWebInfraLogging",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=new(h||(h=c("URI")))(a);var b=a.getQueryData();b=b.ref;return a.setFragment("").setQueryData({ref:b})}g["default"]=a}),98);
__d("MemoryLoggerBase",["CurrentUser","MemoryLoggerConfigWebSitevarConfig","MemoryUtils","ODS","Promise","PromiseMonitor","gkx","ifRequired","performanceNow","prepareURIForWebInfraLogging","promiseDone","requireDeferred","requireWeak","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h,i,j,k=c("requireDeferred")("LogWebMemoryUsageFalcoEvent").__setRef("MemoryLoggerBase"),l,m,n;c("requireWeak")("AdsAccountStore",function(a){l=a});c("requireWeak")("PolarisConfig",function(a){m=a});c("requireWeak")("BarcelonaCurrentUser",function(a){n=a});var o=c("CurrentUser").getAppID(),p=c("MemoryLoggerConfigWebSitevarConfig").measurement_interval_minutes*60*1e3,q=10*1e3,r=c("MemoryLoggerConfigWebSitevarConfig").quick_measurement_interval_seconds*1e3,s=1e3,t=200,u,v=-1,w=-1,x=-1,y=-1,z=null,A=-1,B=null,C=-1,D=-1,E=[];function F(){return(j||(j=b("Promise"))).resolve().then(function(){var a=d("MemoryUtils").getCurrentMemory();a=(a=a.usedJSHeapSize)!=null?a:-1;D=Math.max(a,D);E.push({timestamp:Date.now(),jsHeapSize:a});E.length>t&&E.shift()})}function G(){B||c("ifRequired")("InteractionTracingMetrics",function(a){B=a.getInteractionStat()})}function H(){B||G();return B?B.interactionCount:0}var I=c("gkx")("21030")?function(){C<0&&c("ifRequired")("AdsAccountInsightsStore",function(a){a=a.getLastThirtyDaysSpend().getValue();a!=null&&(C=a)});return C}:function(){return-1},J=c("gkx")("21030")?function(){var a;return(a=(a=l)==null?void 0:a.getSelectedAccountID())!=null?a:"0"}:function(){return"0"},K=c("gkx")("21031")?function(){var a;return(a=(a=(a=m)==null?void 0:a.getViewerIdOrZero())!=null?a:(a=n)==null?void 0:a.getViewerID())!=null?a:"0"}:function(){return"0"};function L(a,b){return Math.max(b,-Math.log(Math.random())*a)}function M(a,b,d){var e=L(b,d);c("setTimeoutAcrossTransitions")(function(){c("promiseDone")(a(),function(){M(a,b,d)})},e)}function N(){var a=c("prepareURIForWebInfraLogging")(document.URL),e=d("MemoryUtils").getCurrentMemory(),f=e.usedJSHeapSize,g=null;return(j||(j=b("Promise"))).resolve().then(function(){if(d("MemoryUtils").isMeasureMemoryOriginTrialSupported())return window.performance.measureUserAgentSpecificMemory().then(function(a){g=a.bytes})}).then(function(){var b=null,e=null,h=URL._fbRegisteredObjectURL;if(typeof h==="function"){h=h();b=h.length;e=0;for(var j=0;j<h.length;j++){var l=h[j];l.type==="Blob"&&(e=(e||0)+l.size)}}l=(i||(i=c("performanceNow")))();var m=Math.round(l/(1e3*60)),n=H(),p=I(),q=J(),r=K(),s=d("PromiseMonitor").getUnresolvedPromiseCount();k.onReady(function(c){c.log(function(){var c;return{app_id:o,accurate_js_heap_size:g!=null?String(g):null,previous_uri:(c=z)==null?void 0:c.toString(),unrevoked_url_count:b!=null?String(b):null,unrevoked_memory_blob:e!=null?String(e):null,current_uri:a.toString(),minute:String(m),previous_used_js_heap_size:String(A),used_js_heap_size:String(f),peak_used_js_heap_size:String(D),navigation_count:String(v),news_feed_count:String(w),news_feed_story_position:String(x),news_feed_story_position_offset:String(y),ad_spend_30:String(p),interaction_count:String(n),script_path:u,ad_account_id:String(q),ig_user_id:String(r),unresolved_promise_count:String(s)}})})})}a={init:function(a){u=a.scriptPath;if(p<=0)return;if(d("MemoryUtils").isMemoryAPISupported()){a=d("MemoryUtils").isMeasureMemoryOriginTrialSupported()?"experimental":"hit";(h||(h=d("ODS"))).bumpEntityKey(2966,"browser_memory_logger",a);M(N,p,q);c("gkx")("21032")&&M(F,r,s)}else(h||(h=d("ODS"))).bumpEntityKey(2966,"browser_memory_logger","miss")},setNavigationCount:function(a){v=a},setNewsFeedCount:function(a){w=a},setNewsFeedStoryPosition:function(a){x=a},setNewsFeedStoryPositionOffset:function(a){y=a},setPreviousUri:function(a){z=c("prepareURIForWebInfraLogging")(a)},setPreviousUsedJSHeapSize:function(a){A=a},setScriptPath:function(a){u=a},getCurrentUsedJSHeapSize:function(){var a=d("MemoryUtils").getCurrentMemory();return(a=a.usedJSHeapSize)!=null?a:-1},getPeakUsedJSHeapSize:function(){return D},getQuickUsedJSHeapSizeSamples:function(){return[].concat(E)}};e=a;g["default"]=e}),98);
__d("MemoryLogger",["MemoryLoggerBase","NavigationMetrics","ScriptPath"],(function(a,b,c,d,e,f,g){var h=!1,i=0;a={init:function(a){var b=this;if(h)return;h=!0;c("MemoryLoggerBase").init({scriptPath:d("ScriptPath").getScriptPath()});d("ScriptPath").subscribe(function(){c("MemoryLoggerBase").setScriptPath(d("ScriptPath").getScriptPath())});c("NavigationMetrics").addListener(c("NavigationMetrics").Events.NAVIGATION_DONE,function(a,c){b.incrementNavigationCount(i)})},setPreviousUri:function(a){c("MemoryLoggerBase").setPreviousUri(a)},incrementNavigationCount:function(){c("MemoryLoggerBase").setNavigationCount(++i)},getQuickUsedJSHeapSizeSamples:function(){return c("MemoryLoggerBase").getQuickUsedJSHeapSizeSamples()}};b=a;g["default"]=b}),98);
__d("MLogging",["MLogState","MemoryLogger","Stratcom","gkx"],(function(a,b,c,d,e,f,g){var h=!1,i=document.URL;a=function(a){c("MLogState").setRefid(a.refid),!h&&c("gkx")("20870")&&(c("MemoryLogger")==null?void 0:c("MemoryLogger").init({}),c("Stratcom").listen("history:change",null,function(){c("MemoryLogger").setPreviousUri(i),i=document.URL,c("MemoryLogger").incrementNavigationCount()}),h=!0)};g.main=a}),34);
__d("XLynxAsyncCallbackController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/si/linkclick/ajax_callback/",{lynx_uri:{type:"String"}})}),null);
__d("MFBLynxLogging",["MRequest","ODS","XLynxAsyncCallbackController"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=c("XLynxAsyncCallbackController").getURIBuilder().getURI();b=new(c("MRequest"))(b).setData({lynx_uri:a});b.listen("error",function(a){a.code?(a.isHandled=!0,(h||(h=d("ODS"))).bumpEntityKey(3861,"linkshim","click_log.post.fail."+a)):(h||(h=d("ODS"))).bumpEntityKey(3861,"linkshim","click_log.post.fail.unknown")});b.send()}g.log=a}),98);
__d("FBLynxBase",["$","LinkshimHandlerConfig","URI","cr:7736","isLinkshimURI"],(function(a,b,c,d,e,f){"use strict";var g;function h(a){if(!b("isLinkshimURI")(a))return null;a=a.getQueryData().u;return!a?null:a}var i={logAsyncClick:function(a){i.swapLinkWithUnshimmedLink(a);a=a.getAttribute("data-lynx-uri");if(!a)return;b("cr:7736").log(a)},originReferrerPolicyClick:function(a){var c=b("$")("meta_referrer");c.content=b("LinkshimHandlerConfig").switched_meta_referrer_policy;i.logAsyncClick(a);setTimeout(function(){c.content=b("LinkshimHandlerConfig").default_meta_referrer_policy},100)},swapLinkWithUnshimmedLink:function(a){var c=a.href,d=h(new(g||(g=b("URI")))(c));if(!d)return;a.setAttribute("data-lynx-uri",c);a.href=d},revertSwapIfLynxURIPresent:function(a){var b=a.getAttribute("data-lynx-uri");if(!b)return;a.removeAttribute("data-lynx-uri");a.href=b}};e.exports=i}),null);
__d("MLynx",["FBLynxBase","Stratcom","URI","isLinkshimURI"],(function(a,b,c,d,e,f){"use strict";var g,h={alreadySetup:!1,setupDelegation:function(a){a===void 0;if(h.alreadySetup)return;h.alreadySetup=!0;b("Stratcom").listen("click","MLynx_originlazy",function(a){a=a.getNode("MLynx_originlazy");a instanceof HTMLAnchorElement&&b("FBLynxBase").originReferrerPolicyClick(a)});b("Stratcom").listen("click","MLynx_asynclazy",function(a){a=a.getNode("MLynx_asynclazy");a instanceof HTMLAnchorElement&&b("FBLynxBase").logAsyncClick(a)})},isShimmedLink:function(a){var c=a.getAttribute("href");c=c?b("isLinkshimURI")(new(g||(g=b("URI")))(c)):!1;return c||a.hasAttribute("data-lynx-uri")}};e.exports=h}),null);
__d("MTimeSpentDebug",["GeneratedLoggerUtils","ScriptPath"],(function(a,b,c,d,e,f,g){var h="logger:MDebugTimeSpentLoggerConfig",i={signal:!0,retry:!0},j=0;function a(a){if(a>=j&&a-j<1e3)return;var b={activity_time_ms:a,last_activity_time_ms:j,script_path:d("ScriptPath").getTopViewEndpoint()};d("GeneratedLoggerUtils").log(h,b,i);j=Math.floor(a/1e3)*1e3}g.report=a}),98);
__d("WebImmediateActiveSecondsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1843988");b=d("FalcoLoggerInternal").create("web_immediate_active_seconds",a);e=b;g["default"]=e}),98);
__d("TimeSpentImmediateActiveSecondsLoggerBlue",["ImmediateActiveSecondsConfig","ScriptPath","WebImmediateActiveSecondsFalcoEvent"],(function(a,b,c,d,e,f,g){var h=0;function i(a){if(c("ImmediateActiveSecondsConfig").sampling_rate<=0)return!1;a=Math.floor(a/1e3)%c("ImmediateActiveSecondsConfig").sampling_rate;return a===c("ImmediateActiveSecondsConfig").ias_bucket}function a(a){if(a>=h&&a-h<1e3)return;i(a)&&c("WebImmediateActiveSecondsFalcoEvent").logImmediately(function(){return{activity_time_ms:a,last_activity_time_ms:h,script_path:c("ScriptPath").getTopViewEndpoint()}});h=Math.floor(a/1e3)*1e3}f.exports={maybeReportActiveSecond:a}}),34);
__d("MTimeSpentImmediateActiveSecondsLogger",["TimeSpentImmediateActiveSecondsLoggerBlue"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("TimeSpentImmediateActiveSecondsLoggerBlue")}),98);
__d("TimeSpentArray",["Banzai","TimeSlice","clearTimeout","pageID","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=2,i=h*32,j,k,l,m,n,o,p,q,r,s,t={},u;function v(){return{timeoutDelayMap:t,nextDelay:u,timeoutInSeconds:m}}function w(){if(j){var a=Date.now();a>o&&(q=Math.min(i,Math.ceil(a/1e3-n)));a=B();a&&j(a,u)}A()}function x(){y(),l=c("setTimeoutAcrossTransitions")(c("TimeSlice").guard(w,"TimeSpentArray Timeout",{propagationType:c("TimeSlice").PropagationType.ORPHAN}),m*1e3)}function y(){l&&(c("clearTimeout")(l),l=null)}function z(a){n=a;o=n*1e3;p=[1];for(a=1;a<h;a++)p.push(0);q=1;r+=1;s+=1;a=s.toString()+"_delay";u=t[a];u===void 0&&(u=t.delay);a=s.toString()+"_timeout";a=t[a];a===void 0&&(a=t.timeout);a=Math.min(a,i);m=a||i;x()}function A(){y(),p=null}function B(){return!p?null:{tos_id:c("pageID"),start_time:n,tos_array:p.slice(0),tos_len:q,tos_seq:s,tos_cum:r}}function C(a){if(a>=o&&a-o<1e3)return;k&&k(a);D(Math.floor(a/1e3))}function D(a){var b=a-n;(b<0||b>=i)&&w();!p?z(a):(p[b>>5]|=1<<(b&31),q=b+1,r+=1,o=a*1e3)}function a(a,b,d,e){r=0,s=-1,j=a,k=e,typeof b==="object"&&b!==null?t=b:t={},z(Math.floor((d===void 0||d===null||d===0?Date.now():d)/1e3)),c("Banzai").subscribe(c("Banzai").SHUTDOWN,w)}function b(a){C(a)}function d(){return B()}function e(){w()}function f(){A()}function E(){return v()}g.init=a;g.update=b;g.get=d;g.ship=e;g.reset=f;g.testState=E}),98);
__d("WebTimeSpentBitArrayFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1829320");b=d("FalcoLoggerInternal").create("web_time_spent_bit_array",a);e=b;g["default"]=e}),98);
__d("MTimeSpentBitArrayLogger",["MTimeSpentDebug","MTimeSpentImmediateActiveSecondsLogger","ODS","Stratcom","TimeSpentArray","Visibility","WebTimeSpentBitArrayFalcoEvent","isInIframe"],(function(a,b,c,d,e,f,g){var h;function i(){d("TimeSpentArray").ship()}function j(){var a=Date.now();d("TimeSpentArray").update(a);c("MTimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(a);n&&d("MTimeSpentDebug").report(a)}function k(a){a._m="1",c("WebTimeSpentBitArrayFalcoEvent").logImmediately(function(){return{start_time:a.start_time,tos_array:a.tos_array,tos_cum:a.tos_cum,tos_id:a.tos_id,tos_len:a.tos_len,tos_seq:a.tos_seq,_m:"1"}})}function l(){return["gesturestart","mousedown","touchstart","scroll","keydown"]}function m(){var a=l();c("Stratcom").listen(a,null,j);a="onpagehide"in window?["pagehide","blur"]:["blur"];c("Stratcom").listen(a,null,i);c("Visibility").addListener("hidden",i)}var n=!1;function a(a,b){if(c("isInIframe")())return;n=!!b;b=Date.now();d("TimeSpentArray").init(k,null,b);m();c("MTimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(b);n&&d("MTimeSpentDebug").report(b);(h||(h=d("ODS"))).bumpEntityKey(223,"ms.time_spent.qa."+a,"time_spent.bits.js_initialized")}g.getMonitoredEvents=l;g.init=a}),98);
__d("MLiteInit",["Kite","WebLite"],(function(a,b,c,d,e,f,g){function a(){d("WebLite").init(),d("Kite").init()}g.init=a}),98);
__d("XLoginController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/login/",{privacy_mutation_token:{type:"String"},email:{type:"String"},cuid:{type:"String"},app_id:{type:"Int"},api_key:{type:"String"},auth_token:{type:"String"},first_attempt:{type:"Exists",defaultValue:!1},social_plugin:{type:"String"},signed_next:{type:"Bool",defaultValue:!1},next:{type:"String"},li:{type:"String"},lhsrc:{type:"String"},dcode:{type:"Int"},profile_sharer_id:{type:"Int"},ref:{type:"String"},try_number:{type:"Int"},subno_key:{type:"String"},one_time_password:{type:"Bool",defaultValue:!1},device_id:{type:"String"},ig_cp_login:{type:"Bool",defaultValue:!1},pl_dbl:{type:"Bool",defaultValue:!1},notif_src:{type:"String"},sk:{type:"String"},partial_uri:{type:"String"},contact_point:{type:"String"},layout:{type:"String"},next_uri:{type:"String"},dyiRequest:{type:"Bool",defaultValue:!1},v:{type:"String"},return_session:{type:"String"},cancel:{type:"String"},cancel_url:{type:"String"},social_plugin_action:{type:"String"},page_id:{type:"String"},rcount:{type:"Int"},e:{type:"Int"},deact:{type:"String"},deact_messaging:{type:"Bool",defaultValue:!1},user_wants_http:{type:"Bool",defaultValue:!1},fbconnect:{type:"Exists",defaultValue:!1},canvas:{type:"Exists",defaultValue:!1},offline_access:{type:"Exists",defaultValue:!1},skip_api_login:{type:"Bool",defaultValue:!1},no_next_msg:{type:"Exists",defaultValue:!1},_fb_noscript:{type:"Exists",defaultValue:!1},nothacked:{type:"Bool",defaultValue:!1},isprivate:{type:"Bool",defaultValue:!1},fw2x:{type:"Bool",defaultValue:!1},uc_qa:{type:"Exists",defaultValue:!1},fl:{type:"Exists",defaultValue:!1},show_profileshare_nativebanner:{type:"Exists",defaultValue:!1},crst:{type:"Bool",defaultValue:!1},from_contact_claiming:{type:"Bool",defaultValue:!1},login_try_number:{type:"Int"},kid_directed_site:{type:"Bool",defaultValue:!1},signup_uri:{type:"String"},sign_up:{type:"String"},rs:{type:"Enum",enumType:0},delete_account:{type:"String"},rid:{type:"Int"},lrs:{type:"Enum",enumType:0},lrid:{type:"Int"},greeting_text:{type:"String"},ref_param:{type:"String"},request_id:{type:"String"},chat_plugin_upgrade:{type:"Bool",defaultValue:!1},re_engagement_opt_in:{type:"Bool",defaultValue:!1},guest_access_token:{type:"String"},referer_uri:{type:"String"},switch_user:{type:"String"},guest_id:{type:"String"},prompt_type:{type:"String"},ps_nf_cuid:{type:"String"},campaign_id:{type:"Int"},session_id:{type:"String"},hide_upsell:{type:"Bool",defaultValue:!1},hide_language_selector:{type:"Bool",defaultValue:!1},hide_registration:{type:"Bool",defaultValue:!1},shbl:{type:"Bool",defaultValue:!1},src:{type:"String"},lara_cancel:{type:"Bool",defaultValue:!1},fb_iaw_itp:{type:"Int"},nfx_context:{type:"String"},custom_content_config:{type:"Enum",enumType:1},funnel_id:{type:"String"},is_two_steps_login:{type:"Bool",defaultValue:!1},one_step_redir:{type:"Bool",defaultValue:!1},login_from_aymh:{type:"Bool",defaultValue:!1}})}),null);
__d("BanzaiAdapter",["cr:5866"],(function(a,b,c,d,e,f,g){g["default"]=b("cr:5866")}),98);
__d("IntlCLDRNumberType01",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType02",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===0||a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType03",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===0||a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType04",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a>=0&&a<=1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType05",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType09",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType34",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===0)return c("IntlVariations").NUMBER_ZERO;else if(a===1)return c("IntlVariations").NUMBER_ONE;else if(a===2)return c("IntlVariations").NUMBER_TWO;else if(a%100>=3&&a%100<=10)return c("IntlVariations").NUMBER_FEW;else if(a%100>=11&&a%100<=99)return c("IntlVariations").NUMBER_MANY;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("WebBlueTimeSpentNavigationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1829319");b=d("FalcoLoggerInternal").create("web_blue_time_spent_navigation",a);e=b;g["default"]=e}),98);
__d("ScriptPathLogger",["Banzai","LogHistory","ScriptPath","URI","WebBlueTimeSpentNavigationFalcoEvent","WebSession","isInIframe"],(function(a,b,c,d,e,f,g){"use strict";var h;f="script_path_change";var i={scriptPath:null,categoryToken:null,extraData:{}},j=!1,k="imp_id";function l(a){var b=(h||(h=c("URI"))).getNextURI?(h||(h=c("URI"))).getNextURI():new(h||(h=c("URI")))(window.location.href),d=b.getQueryData();b=b.getPath();b.endsWith("/")&&(b=b.substr(0,b.length-1));d.comment_id&&(a.extra_data=babelHelpers["extends"]({},a.extra_data,{graphql_comment_id:d.comment_id}));var e=m(b,d);if(e){a.content_id=e;return}e=n(b);if(e!==""){a.dest_topic_feed=e;return}if(o(b)){e=d.queue_id;e&&(a.dest_srt_queue_id=e);b=d.job_in_review;b&&(a.dest_srt_reviewing_job_id=b);return}}function m(a,b){if(b.story_fbid)return b.story_fbid;if(b.fbid)return b.fbid;if(b.view==="permalink"&&b.id)return b.id;b=/\/(posts|videos|notes|groups\/.*\/permalink)\//;var c=/^[0-9]+$/;if(b.test(a)){b=a.split("/");a=b[b.length-1];if(c.test(a))return a}return""}function n(a){if(!a||a.search("/feed/topics/")==-1)return"";a=a.split("/");return a[a.length-1]}function o(a){return!!a&&a.search("/intern/review/")!==-1}function p(a,b,e,f){d("WebSession").extend();if(!j||c("isInIframe")())return;var g={source_path:a.scriptPath,source_token:a.categoryToken,dest_path:b.scriptPath,dest_token:b.categoryToken,impression_id:b.extraData?b.extraData.imp_id:null,cause:e,sid_raw:d("WebSession").getId()};e=e==="unload";e||l(g);if(f!=null){var h=f.snowlift_content_id;!e&&h!=null&&(g.content_id=h,delete f.snowlift_content_id);g.extra_data=babelHelpers["extends"]({},g.extra_data,f)}a.scriptPath===null&&(g.referrer=document.referrer);e=d("ScriptPath").getClickPointInfo();e&&(g.click_point_info=e);if(a.extraData)for(h in a.extraData)h!=k&&(g["source_"+h]=a.extraData[h]);if(b.extraData)for(f in b.extraData)f!=k&&(g["dest_"+f]=b.extraData[f]);a.topViewEndpoint&&(g.source_endpoint=a.topViewEndpoint);b.topViewEndpoint&&(g.dest_endpoint=b.topViewEndpoint);a.restored&&(g.source_restored=!0);c("WebBlueTimeSpentNavigationFalcoEvent").logImmediately(function(){return{json_data:JSON.stringify(g)}});d("ScriptPath").setClickPointInfo(null)}function q(){p(d("ScriptPath").getSourcePageInfo()||i,d("ScriptPath").getPageInfo()||i,"load")}function r(a,b,c){p(a,b,"transition",c)}function a(){p(d("ScriptPath").getPageInfo()||i,i,"unload"),d("ScriptPath").shutdown()}var s=d("ScriptPath").subscribe(function(a){if(j){var b=a.source,c=a.dest,d=a.cause;a=a.extraData;d?p(b||i,c||i,d,a):b?r(b,c||i,a):q()}});c("Banzai").subscribe(c("Banzai").SHUTDOWN,a);function b(){j=!0,d("ScriptPath").getPageInfo()&&q()}function e(){j=!1,s.remove()}g.BANZAI_LOGGING_ROUTE=f;g.startLogging=b;g.stopLogging=e}),98);
/**
 * License: https://www.facebook.com/legal/license/WRsJ32R7YJG/
 */
__d("SnappyCompress",[],(function(a,b,c,d,e,f){"use strict";function g(){return typeof process==="object"&&(typeof process.versions==="object"&&typeof process.versions.node!=="undefined")?!0:!1}function h(a){return a instanceof Uint8Array&&(!g()||!Buffer.isBuffer(a))}function i(a){return a instanceof ArrayBuffer}function j(a){return!g()?!1:Buffer.isBuffer(a)}var k="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";function a(a){if(!h(a)&&!i(a)&&!j(a))throw new TypeError(k);var b=!1,c=!1;h(a)?b=!0:i(a)&&(c=!0,a=new Uint8Array(a));a=new A(a);var d=a.readUncompressedLength();if(d===-1)throw new Error("Invalid Snappy bitstream");if(b){b=new Uint8Array(d);if(!a.uncompressToBuffer(b))throw new Error("Invalid Snappy bitstream")}else if(c){b=new ArrayBuffer(d);c=new Uint8Array(b);if(!a.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else{b=Buffer.alloc(d);if(!a.uncompressToBuffer(b))throw new Error("Invalid Snappy bitstream")}return b}function b(a){if(!h(a)&&!i(a)&&!j(a))throw new TypeError(k);var b=!1,c=!1;h(a)?b=!0:i(a)&&(c=!0,a=new Uint8Array(a));a=new x(a);var d=a.maxCompressedLength(),e,f,g;b?(e=new Uint8Array(d),g=a.compressToBuffer(e)):c?(e=new ArrayBuffer(d),f=new Uint8Array(e),g=a.compressToBuffer(f)):(e=Buffer.alloc(d),g=a.compressToBuffer(e));if(!e.slice){f=new Uint8Array(Array.prototype.slice.call(e,0,g));if(b)return f;else if(c)return f.buffer;else throw new Error("not implemented")}return e.slice(0,g)}c=16;var l=1<<c,m=14,n=new Array(m+1);function o(a,b){return a*506832829>>>b}function p(a,b){return a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24)}function q(a,b,c){return a[b]===a[c]&&a[b+1]===a[c+1]&&a[b+2]===a[c+2]&&a[b+3]===a[c+3]}function r(a,b,c,d,e){var f;for(f=0;f<e;f++)c[d+f]=a[b+f]}function s(a,b,c,d,e){c<=60?(d[e]=c-1<<2,e+=1):c<256?(d[e]=60<<2,d[e+1]=c-1,e+=2):(d[e]=61<<2,d[e+1]=c-1&255,d[e+2]=c-1>>>8,e+=3);r(a,b,d,e,c);return e+c}function t(a,b,c,d){if(d<12&&c<2048){a[b]=1+(d-4<<2)+(c>>>8<<5);a[b+1]=c&255;return b+2}else{a[b]=2+(d-1<<2);a[b+1]=c&255;a[b+2]=c>>>8;return b+3}}function u(a,b,c,d){while(d>=68)b=t(a,b,c,64),d-=64;d>64&&(b=t(a,b,c,60),d-=60);return t(a,b,c,d)}function v(a,b,c,d,e){var f=1;while(1<<f<=c&&f<=m)f+=1;f-=1;var g=32-f;typeof n[f]==="undefined"&&(n[f]=new Uint16Array(1<<f));f=n[f];var h;for(h=0;h<f.length;h++)f[h]=0;h=b+c;var i=b,j=b,k,l,r,t,v,w=!0,x=15;if(c>=x){c=h-x;b+=1;x=o(p(a,b),g);while(w){t=32;l=b;do{b=l;k=x;v=t>>>5;t+=1;l=b+v;if(b>c){w=!1;break}x=o(p(a,l),g);r=i+f[k];f[k]=b-i}while(!q(a,b,r));if(!w)break;e=s(a,j,b-j,d,e);do{v=b;k=4;while(b+k<h&&a[b+k]===a[r+k])k+=1;b+=k;l=v-r;e=u(d,e,l,k);j=b;if(b>=c){w=!1;break}t=o(p(a,b-1),g);f[t]=b-1-i;v=o(p(a,b),g);r=i+f[v];f[v]=b-i}while(q(a,b,r));if(!w)break;b+=1;x=o(p(a,b),g)}}j<h&&(e=s(a,j,h-j,d,e));return e}function w(a,b,c){do b[c]=a&127,a=a>>>7,a>0&&(b[c]+=128),c+=1;while(a>0);return c}function x(a){this.array=a}x.prototype.maxCompressedLength=function(){var a=this.array.length;return 32+a+Math.floor(a/6)};x.prototype.compressToBuffer=function(a){var b=this.array,c=b.length,d=0,e=0,f;e=w(c,a,e);while(d<c)f=Math.min(c-d,l),e=v(b,d,f,a,e),d+=f;return e};var y=[0,255,65535,16777215,4294967295];function r(a,b,c,d,e){var f;for(f=0;f<e;f++)c[d+f]=a[b+f]}function z(a,b,c,d){var e;for(e=0;e<d;e++)a[b+e]=a[b-c+e]}function A(a){this.array=a,this.pos=0}A.prototype.readUncompressedLength=function(){var a=0,b=0,c,d;while(b<32&&this.pos<this.array.length){c=this.array[this.pos];this.pos+=1;d=c&127;if(d<<b>>>b!==d)return-1;a|=d<<b;if(c<128)return a;b+=7}return-1};A.prototype.uncompressToBuffer=function(a){var b=this.array,c=b.length,d=this.pos,e=0,f,g,h,i;while(d<b.length){f=b[d];d+=1;if((f&3)===0){g=(f>>>2)+1;if(g>60){if(d+3>=c)return!1;h=g-60;g=b[d]+(b[d+1]<<8)+(b[d+2]<<16)+(b[d+3]<<24);g=(g&y[h])+1;d+=h}if(d+g>c)return!1;r(b,d,a,e,g);d+=g;e+=g}else{switch(f&3){case 1:g=(f>>>2&7)+4;i=b[d]+(f>>>5<<8);d+=1;break;case 2:if(d+1>=c)return!1;g=(f>>>2)+1;i=b[d]+(b[d+1]<<8);d+=2;break;case 3:if(d+3>=c)return!1;g=(f>>>2)+1;i=b[d]+(b[d+1]<<8)+(b[d+2]<<16)+(b[d+3]<<24);d+=4;break;default:break}if(i===0||i>e)return!1;z(a,e,i,g);e+=g}}return!0};e.exports.uncompress=a;e.exports.compress=b}),null);
__d("SnappyCompressUtil",["SnappyCompress"],(function(a,b,c,d,e,f){"use strict";var g={compressUint8ArrayToSnappy:function(c){if(c==null)return null;var d=null;try{d=b("SnappyCompress").compress(c)}catch(a){return null}c="";for(var e=0;e<d.length;e++)c+=String.fromCharCode(d[e]);return a.btoa(c)},compressStringToSnappy:function(b){if(a.Uint8Array===void 0||a.btoa===void 0)return null;var c=new a.Uint8Array(b.length);for(var d=0;d<b.length;d++){var e=b.charCodeAt(d);if(e>127)return null;c[d]=e}return g.compressUint8ArrayToSnappy(c)},compressStringToSnappyBinary:function(c){if(a.Uint8Array===void 0)return null;var d=null;if(a.TextEncoder!==void 0)d=new TextEncoder().encode(c);else{d=new a.Uint8Array(c.length);for(var e=0;e<c.length;e++){var f=c.charCodeAt(e);if(f>127)return null;d[e]=f}}f=null;try{f=b("SnappyCompress").compress(d)}catch(a){return null}return f}};e.exports=g}),null);
__d("BanzaiCompressionUtils",["FBLogger","Promise","SnappyCompressUtil","once","performanceNow"],(function(a,b,c,d,e,f){"use strict";var g,h,i=b("once")(function(){if(a.CompressionStream==null)return!1;if(a.Response==null)return!1;try{new a.CompressionStream("deflate")}catch(a){return!1}return!0}),j={compressWad:function(a,c){if(a.needs_compression!==!0){delete a.needs_compression;return}if(c==="deflate"){j.compressWad(a,"snappy");return}var d=(g||(g=b("performanceNow")))(),e=JSON.stringify(a.posts),f;switch(c){case"snappy":f=b("SnappyCompressUtil").compressStringToSnappyBinary(e);break;case"snappy_base64":f=b("SnappyCompressUtil").compressStringToSnappy(e);break;default:break}f!=null&&f.length<e.length?(a.posts=f,a.compression=c,a.snappy_ms=Math.ceil((g||(g=b("performanceNow")))()-d),a.snappy_ms<0&&b("FBLogger")("BanzaiCompressionUtils").warn("Expected positive snappy_ms but got %s",a.snappy_ms)):a.compression="";delete a.needs_compression},compressWadAsync:function(c,d){if(d!=="deflate"){j.compressWad(c,"snappy");return(h||(h=b("Promise"))).resolve()}if(!i())return j.compressWadAsync(c,"snappy");var e=(g||(g=b("performanceNow")))(),f=JSON.stringify(c.posts),k=new Response(f).body;if(!k){c.compression="";delete c.needs_compression;return(h||(h=b("Promise"))).resolve()}k=k.pipeThrough(new a.CompressionStream("deflate"));return new Response(k).arrayBuffer().then(function(a){a.byteLength<f.length?(c.posts=new Uint8Array(a),c.compression=d,c.snappy_ms=Math.ceil((g||(g=b("performanceNow")))()-e),c.snappy_ms<0&&b("FBLogger")("BanzaiCompressionUtils").warn("Expected positive snappy_ms but got %s",c.snappy_ms)):c.compression="",delete c.needs_compression})["catch"](function(){c.compression="",delete c.needs_compression})},outOfBandsPosts:function(a){var b=0,c={};for(var d=0;d<a.length;d++){var e=a[d],f=e.compression==="snappy"||e.compression==="deflate";if(f){f=new Blob([e.posts],{type:"application/octet-stream"});e.posts=String(b);c["post_"+String(b)]=f;b++}}return c}};e.exports=j}),null);
__d("BanzaiBase",["BanzaiAdapter","BanzaiCompressionUtils","BanzaiConsts","BanzaiLazyQueue","BanzaiUtils","CurrentUser","ErrorGuard","ExecutionEnvironment","FBLogger","NavigationMetrics","SetIdleTimeoutAcrossTransitions","Visibility","WebSession","performanceAbsoluteNow"],(function(a,b,c,d,e,f){var g,h,i,j,k,l,m=[],n=null,o={_clearPostBuffer:function(){m=[]},_flushLazyQueue:function(){b("BanzaiLazyQueue").flushQueue().forEach(function(a){return o.post.apply(o,a)})},_gatherWadsAndPostsFromBuffer:function(a,c,d,e,f){var g={currentSize:0,keepRetryable:d,overlimit:!1,sendMinimumOnePost:f,wadMap:new Map()};d=e.filter(function(d,e){return b("BanzaiUtils").filterPost(d,a,c,g)});g.overlimit&&d.length&&o._schedule(0);return d},_getEventTime:function(){return(g||(g=b("performanceAbsoluteNow")))()},_getWebSessionId:function(){return b("WebSession").getId()},_getPostBuffer:function(){return m},_getUserId:function(){return b("CurrentUser").getPossiblyNonFacebookUserID()},_getAppId:function(){return b("CurrentUser").getAppID()},_initialize:function(){(h||(h=b("ExecutionEnvironment"))).canUseDOM&&(o.adapter.useBeacon&&b("Visibility").isSupported()?(b("Visibility").addListener(b("Visibility").HIDDEN,function(){o._getPostBuffer().length>0&&(o._tryToSendViaBeacon()||o._store())}),o.isEnabled("enable_client_logging_clear_on_visible")&&b("Visibility").addListener(b("Visibility").VISIBLE,function(){o._tryToSendViaBeacon()||o._restore()})):o.adapter.setHooks(o),o.adapter.setUnloadHook(o),b("NavigationMetrics").addListener(b("NavigationMetrics").Events.NAVIGATION_DONE,function(a,c){if(c.pageType!=="normal")return;o._restore();b("NavigationMetrics").removeCurrentListener()}))},_sendBeacon:function(b,c){return a.navigator.sendBeacon(b,c)},_prepForTransit:function(a){var c=new FormData();c.append("ts",String(Date.now()));var d=b("BanzaiCompressionUtils").outOfBandsPosts(a);Object.keys(d).forEach(function(a){c.append(a,d[a])});c.append("q",JSON.stringify(a));return c},_prepWadForTransit:function(a){b("BanzaiCompressionUtils").compressWad(a,b("BanzaiAdapter").preferredCompressionMethod())},_processCallbacksAndSendViaBeacon:function(){var a=[],c=[],d=[];o._gatherWadsAndPostsFromBuffer(c,d,!0,a,!1);if(c.length>0){c[0].send_method="beacon";c.map(o._prepWadForTransit);d=o._prepForTransit(c);a=b("BanzaiAdapter").getEndPointUrl(!0);c=o._sendBeacon(a,d);c||b("FBLogger")("banzai").warn("Error sending beacon")}},_restore:function(){var a=b("BanzaiAdapter").getStorage(),c=function(a){m.push(a)};(i||(i=b("ErrorGuard"))).applyWithGuard(a.restore,a,[c]);o._schedule(b("BanzaiAdapter").config.RESTORE_WAIT||(j||(j=b("BanzaiConsts"))).VITAL_WAIT)},_schedule:function(a){var c=o._getEventTime()+a;if(!l||c<l){l=c;b("SetIdleTimeoutAcrossTransitions").clear(k);k=b("SetIdleTimeoutAcrossTransitions").start(b("BanzaiAdapter").wrapInTimeSlice(o._sendWithCallbacks,"Banzai.send"),a);return!0}return!1},_sendWithCallbacks:function(a,c){l=null;o._schedule(o.BASIC.delay);if(!b("BanzaiAdapter").readyToSend()){c&&c();return}if(o.isEnabled("flush_storage_periodically")){var d=b("BanzaiAdapter").getStorage(),e=function(){o._restore()};(i||(i=b("ErrorGuard"))).applyWithGuard(d.flush,d,[e])}b("BanzaiAdapter").inform((j||(j=b("BanzaiConsts"))).SEND);d=[];var f=[];m=o._gatherWadsAndPostsFromBuffer(d,f,!0,m,!0);if(d.length<=0){b("BanzaiAdapter").inform((j||(j=b("BanzaiConsts"))).OK);a&&a();return}d[0].trigger=n;n=null;d[0].send_method="ajax";d.map(o._prepWadForTransit);b("BanzaiAdapter").send(o._prepForTransit(d),function(){f.forEach(function(a){a=a;a.__meta.status=(j||(j=b("BanzaiConsts"))).POST_SENT;a.__meta.callback&&a.__meta.callback()}),a&&a()},function(a){f.forEach(function(c){b("BanzaiUtils").retryPost(c,a,m)}),c&&c()})},_store:function(){var a=b("BanzaiAdapter").getStorage();(i||(i=b("ErrorGuard"))).applyWithGuard(a.store,a,[m])},_testState:function(){return{postBuffer:m,triggerRoute:n}},_tryToSendViaBeacon:function(){if(!(navigator&&navigator.sendBeacon&&b("BanzaiAdapter").isOkToSendViaBeacon()))return!1;var a=[],c=[];m=o._gatherWadsAndPostsFromBuffer(a,c,!1,m,!1);if(a.length<=0)return!1;a[0].send_method="beacon";a.map(o._prepWadForTransit);a=o._prepForTransit(a);var d=b("BanzaiAdapter").getEndPointUrl(!0);d=o._sendBeacon(d,a);if(!d){c.forEach(function(a){m.push(a)});return!1}return!0},_unload:function(){if(b("BanzaiAdapter").config.disabled)return;o._flushLazyQueue();navigator&&navigator.sendBeacon&&b("BanzaiAdapter").isOkToSendViaBeacon()&&o._processCallbacksAndSendViaBeacon();b("BanzaiAdapter").cleanup();b("BanzaiAdapter").inform((j||(j=b("BanzaiConsts"))).SHUTDOWN);m.length>0&&((!o.adapter.useBeacon||!o._tryToSendViaBeacon())&&o._store())},BASIC:{delay:b("BanzaiAdapter").config.MAX_WAIT||(j||(j=b("BanzaiConsts"))).BASIC_WAIT},BASIC_WAIT:(j||(j=b("BanzaiConsts"))).BASIC_WAIT,ERROR:j.ERROR,OK:j.OK,SEND:j.SEND,SHUTDOWN:j.SHUTDOWN,VITAL:{delay:b("BanzaiAdapter").config.MIN_WAIT||(j||(j=b("BanzaiConsts"))).VITAL_WAIT},VITAL_WAIT:j.VITAL_WAIT,adapter:b("BanzaiAdapter"),canUseNavigatorBeacon:function(){return Boolean(navigator&&navigator.sendBeacon&&b("BanzaiAdapter").isOkToSendViaBeacon())},flush:function(a,c){b("SetIdleTimeoutAcrossTransitions").clear(k),o._sendWithCallbacks(a,c)},isEnabled:function(a){return Boolean(b("BanzaiAdapter").config.gks&&b("BanzaiAdapter").config.gks[a]&&!b("BanzaiAdapter").config.disabled)},post:function(a,c,d){a||b("FBLogger")("banzai").mustfix("Banzai.post called without specifying a route");o._flushLazyQueue();var e=a.split(":");if((b("BanzaiAdapter").config.known_routes||[]).indexOf(e[0])===-1){b("BanzaiAdapter").config.should_log_unknown_routes===!0&&b("FBLogger")("banzai").blameToPreviousFrame().mustfix("Attempted to post to invalid Banzai route '"+a+"'. This call site should be cleaned up.");if(b("BanzaiAdapter").config.should_drop_unknown_routes===!0)return}var f="";try{var g;f=(g=JSON.stringify(c))!=null?g:""}catch(c){b("FBLogger")("banzai").catching(c).addToCategoryKey(a).mustfix("Could not JSON.stringify banzai data for route %s",a);return}var i=d==null?void 0:d.retry;if(b("BanzaiAdapter").config.disabled)return;if(!(h||(h=b("ExecutionEnvironment"))).canUseDOM&&!(h||(h=b("ExecutionEnvironment"))).isInWorker)return;var k=o.adapter.getTopLevel();if(k){var l;try{l=k.require("Banzai")}catch(a){l=null}if(l){l.post.apply(l,arguments);return}}var p=b("BanzaiAdapter").config.blacklist;if(p&&(p.indexOf&&(typeof p.indexOf=="function"&&p.indexOf(a)!=-1)))return;var q=f.length,r=b("BanzaiUtils").wrapData(a,c,o._getEventTime(),i,q),s=r;(d==null?void 0:d.callback)&&(s.__meta.callback=d==null?void 0:d.callback);(d==null?void 0:d.compress)!=null&&(s.__meta.compress=d==null?void 0:d.compress);var t=d==null?void 0:d.delay;t==null&&(t=(j||(j=b("BanzaiConsts"))).BASIC_WAIT);if(d==null?void 0:d.signal){s.__meta.status=(j||(j=b("BanzaiConsts"))).POST_INFLIGHT;var u=[{user:o._getUserId(),webSessionId:o._getWebSessionId(),app_id:o._getAppId(),posts:[r],trigger:a}];b("BanzaiAdapter").send(o._prepForTransit(u),function(){s.__meta.status=(j||(j=b("BanzaiConsts"))).POST_SENT,s.__meta.callback&&s.__meta.callback()},function(a){b("BanzaiUtils").retryPost(r,a,m)},!0);if(!i)return}m.push(r);(o._schedule(t)||!n)&&(n=a)},subscribe:b("BanzaiAdapter").subscribe};o._initialize();e.exports=o}),null);